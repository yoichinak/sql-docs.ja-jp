---
title: 高可用性と障害復旧
description: バックエンドデータの高可用性とディザスターリカバリーを向上させるために、SQL マスターデータサービスを Always On 可用性グループにインストールして構成します。
ms.custom: seo-lt-2019
ms.date: 07/28/2017
ms.prod: sql
ms.prod_service: mds
ms.reviewer: ''
ms.technology: master-data-services
ms.topic: conceptual
ms.assetid: ''
author: lrtoyou1223
ms.author: lle
ms.openlocfilehash: a6cc30d907d6b8c0c14d177106da3457eb828bef
ms.sourcegitcommit: cfa04a73b26312bf18d8f6296891679166e2754d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/19/2020
ms.locfileid: "92194099"
---
# <a name="high-availability-and-disaster-recovery-for-master-data-services"></a>マスター データ サービスの高可用性とディザスター リカバリー

[!INCLUDE [SQL Server Windows Only - ASDBMI ](../../includes/applies-to-version/sql-windows-only-asdbmi.md)]

この記事では、Always On 可用性グループ構成でホストされているマスターデータサービス (MDS) のソリューションについて説明します。 この記事では、sql 2016 Always On 可用性グループ (AG) に SQL 2016 マスターデータサービスをインストールして構成する方法について説明します。 このソリューションの主な目的は、SQL Server データベースでホストされている MDS バックエンド データの高可用性とディザスター リカバリーの改善です。

## <a name="introduction"></a>はじめに

この記事では、Always On 可用性グループ構成でホストされているマスターデータサービス (MDS) のソリューションについて説明します。 この記事では、sql 2016 Always On 可用性グループ (AG) に SQL 2016 MDS をインストールして構成する方法について説明します。 このソリューションの主な目的は、SQL Server データベースでホストされている MDS バックエンド データの高可用性とディザスター リカバリーの改善です。

このソリューションを実装するには、この記事で取り上げる次の作業を完了する必要があります。

1. [Windows Server フェールオーバー クラスター (WSFC) をインストールし、設定する](#windows-server-failover-cluster-wsfc)。

2. [Always On 可用性グループを設定](#sql-server-always-on-availability-group)します。

3. [WSFC ノードで実行されるように MDS を構成する](#configure-mds-to-run-on-an-wsfc-node)。

上記のセクションでは、作業指示に続き、テクノロジについて簡単に説明します。 テクノロジの詳細については、各セクションのリンクにある文書をご覧ください。

この記事で説明されているこのソリューションは、各データベースに複数の同期または非同期レプリカがある AG の上に構築されています。 トランザクションを受け付ける (ユーザー要求を受け取る) レプリカは 1 つだけです。 それがプライマリ レプリカです。

各レプリカには独自のストレージがあります。そのため、このソリューションでは、共有ストレージが中心に用意されることはありません。 ソフトウェアまたはハードウェアの不具合が発生し、それがプライマリ レプリカに影響を与えるとき、プライマリ レプリカは同期または非同期レプリカにフェールオーバーされます。このフェールオーバーは、構成や状況に応じて自動または手動で行われます。 データベースの高可用性が実現し、ユーザーにとって中断が最小限に抑えられます。

非同期レプリカは、通常、プライマリ レプリカ データ センターから離れた場所にあるデータ センターでホストされます。 不具合が発生した場合、プライマリ レプリカは別のデータ センターにフェールオーバーできます。 これにより、データベースのディザスター リカバリーが保証されます。

この記事で説明するソリューションでは、実演目的で、次のバージョンのソフトウェアを使用します。 それより古いバージョンでも同様に動作しますが、ささいな違いが発生することがあります。

- Windows Server 2012R2、Server Failover クラスターあり
- SQL Server 2016、マスター データ サービス機能あり

また、このソリューションでは、2 つのレプリカのホストに 2 つの VM が使用されます。**MDS-HA1** と **MDS-HA2** です。 AG でサポートされている限り、MDS では使用できるレプリカの数が制限されません。

この記事では、Windows Server、Windows Server フェールオーバークラスター、Ag、SQL Server MDS に関する基本的な知識があることを前提としています。

## <a name="what-is-not-covered"></a>本記事の対象外

本文書では、次の項目は対象外となっています。

- マスター データ サービス UI をホストする Web サーバーである IIS を高可用性にして、障害発生後、復旧可能にする方法。 MDS では、IIS に対して特定の要件を課すことがありません。そのため、IIS を高可用性にして、負荷を分散するための標準的な技法がここでも使えます。

- SQL Server Always On フェールオーバークラスターインスタンス (FCI) を使用して、MDS バックエンドで高可用性 (HA) をサポートする方法。 SQL Server フェールオーバー クラスタリングは別の HA ソリューションであり、SQL Server で公式にサポートされています。MDS とは連動しません。

- FCI と AG のハイブリッドソリューションを使用して MDS バックエンドで HA をサポートする方法。 ハイブリッド ソリューションは MDS と連動しません。

## <a name="design-consideration"></a>設計上の考慮事項

図1は、主に AG で使用される一般的な構成を示しています。 プライマリ データ センターには、同期コミット リレーションシップを持つ 2 つのレプリカがあります。いずれのレプリカにも VOTE 特権が与えられています。 これは主に、プライマリ レプリカに不具合が生じた場合に HA を改善するために利用されます。

ディザスター リカバリー データ センターには、プライマリとの非同期コミット リレーションシップを持つセカンダリ レプリカがあります。 このデータ センターは、通常、プライマリ データ センターと地理的に異なる地域に置かれます。 セカンダリ レプリカには、VOTE 特権が与えられません。

この構成は、プライマリデータセンターが火災、地震などの災害に備えている場合に復旧を実現するために使用されます。この構成は、比較的低コストで HA とディザスターリカバリーの両方を実現します。

![Always On 可用性グループの一般的な構成](media/Fig1_TypicalConfig.png)

図 1. 一般的な Always On 可用性グループの構成

ディザスター リカバリーを考慮する必要がない場合、セカンダリ データ センターにレプリカを置く必要がありません。 HA を改善する必要がある場合、同じプライマリ データ センターの同期レプリカを増やすことができます。

シナリオと要件を検討し、非同期レプリカと同期レプリカの必要な数、レプリカを置くデータ センターを選択することは重要です。

## <a name="windows-server-failover-cluster-wsfc"></a>Windows Server フェールオーバー クラスター (WSFC)

このセクションでは、次の作業について取り上げます。

1. [Windows フェールオーバー クラスター機能をインストールする](#install-failover-cluster-feature)。

2. [Windows Server フェールオーバークラスターを作成](#create-a-windows-server-failover-cluster)します。

前のセクションの図 1 に示されていたように、この記事で説明するソリューションには、Windows Server フェールオーバー クラスター (WSFC) が含まれます。 Ag はエラー検出とフェールオーバーのために構成された SC に依存しているため、WSFC を設定する必要があります。

WSFC は、アプリケーションやサービスの高可用性を改善する機能です。 Microsoft フェールオーバー クラスター サービスを実行する非依存 Windows Server インスタンスのグループで構成されています。 Windows Server インスタンス (ノードと呼ばれることもあります) は互いに通信できるように接続され、不具合の検出が可能になります。 WSFC は不具合の検出機能とフェールオーバー機能を提供します。 クラスターでノードやサービスに不具合が生じた場合、それが検出され、別のノードが、自動または手動で、不具合のあるノードでホストされているサービスの提供を開始します。 そのため、ユーザーにとっては、サービスの中断が最小限に抑えられます。サービスの可用性が向上します。  

### <a name="prerequisites"></a>前提条件

Windows Server オペレーティング システムがすべてのインスタンスにインストールされており、あらゆる更新プログラムが適用されていること。

> [!NOTE]
> 考えられるあらゆる非互換性の問題を回避するために、すべてのインスタンスで同じバージョンの Windows とおなじ機能セットをインストールすることを**強くお勧めします**。

### <a name="install-failover-cluster-feature"></a>フェールオーバー クラスター機能をインストールする

Windows Server インスタンスごとに次の手順を実行し、各インスタンスに WSFC 機能をインストールします。 管理者アクセス許可が必要です。

1. Windows Server で**サーバー マネージャー**を起動し、右側のウィンドウで **[役割と機能の追加]** をクリックします。 **役割と機能の追加ウィザード**が起動します。

2. **[機能]** ページが表示されるまで **[次へ]** をクリックします。

3. **[フェールオーバー クラスタリング]** チェックボックスをオンにし、**[次へ]** をクリックしてインストールを完了します。 図 2 を参照してください。

   **フェールオーバークラスタリングに必要な機能を追加**するかどうかを確認するメッセージが表示されたら、[**機能の追加**] をクリックします。 図 3 を参照してください。

   ![役割と機能の追加ウィザード、フェールオーバー クラスタリング](media/Fig2_SelectFeatures.png)

   図 2

   ![役割と機能の追加ウィザード、フェールオーバー クラスタリングに必要](media/Fig3_RequiredFeaturesFailover.png)

   図 3

4. **[確認]** ページで **[インストール]** をクリックし、フェールオーバー クラスタリング機能をインストールします。

5. **[結果]** ページで、エラーや警告がなく、すべて正常にインストールされたことを確認します。

### <a name="create-a-windows-server-failover-cluster"></a>Windows Server フェールオーバー クラスターを作成する

WSFC 機能がすべてのインスタンスにインストールされたら、WSFC を構成できます。 この作業は 1 つのノードにだけ行えば完了です。

1. Windows Server で**サーバー マネージャー**を開き、右隅にある **[ツール]** メニューの **[フェールオーバー クラスター マネージャー]** をクリックしてマネージャーを起動します。

2. **フェールオーバー クラスター マネージャー**の右側のウィンドウで **[構成の検証]** をクリックします。 図 4 を参照してください。

   ![フェールオーバー クラスター マネージャー、構成の検証](media/Fig4_ValidateConfig.png)

   図 4

3. **[構成の検証]** **ウィザード**で、**[次へ]** をクリックします。

4. **[サーバーまたはクラスターの選択]** ダイアログ ボックスで、SQL Server をホストするサーバー名を追加し、**[次へ]** をクリックします。 図 5 を参照してください。

   この例では、2 つのインスタンス、MDS-HA1 と MDS-HA2 を追加しました。

   ![構成の検証ウィザード、[サーバーまたはクラスターの選択] ページ](media/Fig5_AddServer.png)

   図 5

5. **[テスト オプション]** ページで、**[すべてのテストを実行する]** をクリックし、**[次へ]** をクリックします。

6. **[次へ]** をクリックし、検証を完了します。

   **[検証]** ページには、進捗状況が表示されます。**[概要]** ページには、検証のまとめが表示されます。 図 6 と図 7 を参照してください。

7. **[概要]** ページで、警告やエラー メッセージがないか確認します。

   エラーは修正する必要があります。 警告は問題とならない場合があります。 警告メッセージは、"テストした項目は要件を満たしていますが、確認が推奨される要素が含まれています" ということを意味するものです。 たとえば、図 7 には、"ディスク アクセス待ち時間検証" という警告があります。これはディスクが他のタスクで一時的に占有されていることを原因として示すもので、無視してかまいません。 詳しくは、それぞれの警告/エラー メッセージのオンライン ドキュメントをご覧ください。 図 7 を参照してください。
   
   ![検証の構成ウィザード、[検証] ページ](media/Fig6_ValidationTests.png)

   図 6

   ![検証の構成ウィザード、[概要] ページ](media/Fig7_ValidationSummary.png)

   図 7

8. **[概要]** ページで、**[検証されたノードを使用してクラスターを今すぐ作成する]** チェックボックスがオンになっていることを確認し、**[完了]** をクリックして**クラスターの作成** **ウィザード**を開始します。

9. **[クラスターの作成]** **ウィザード**で、**[次へ]** をクリックします。

10. **[クラスター管理用のアクセス ポイント]** ページで、WSFC クラスター名を入力し、**[次へ]** をクリックします。 この例では、クラスター名を "MDS-HA" にしています。 図 8 を参照してください。

   ![クラスター名を入力する](media/Fig8_EnterClusterName.png)

   図 8

11. 続いて **[次へ]** をクリックし、クラスター作成を完了します。 **[Summary of Cluster MDS-HA]\(クラスター MDS-HA の概要\)** セクションには、クラスター情報が表示されます。 図 9 を参照してください。

   ![クラスターの概要情報を見る](media/Fig9_ClusterSummary.png)

   図 9

   後でノードを追加する必要がある場合、**フェールオーバー クラスター マネージャー**の右側のウィンドウにある **[ノードの追加]** アクションをクリックします。

メモ:

- WSFC 機能は、一部のエディションの Windows Server でご利用いただけない場合があります。 お使いのエディションにこの機能があることをご確認ください。

- Active Directory で WSFC を設定するアクセス許可が与えられていることを確認します。 問題がある場合は、「[フェールオーバー クラスターのステップ バイ ステップ ガイド: Active Directory でのアカウントの構成](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731002(v=ws.10))」を参照してください。

WSFC の詳細については、「[Failover Clusters](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732488(v=ws.10))」(フェールオーバー クラスター) を参照してください。

## <a name="sql-server-always-on-availability-group"></a>Always On 可用性グループの SQL Server

このセクションでは、次の作業について取り上げます。

1. [SQL Server Always On 可用性グループを有効に](#enable-sql-server-always-on-availability-groups-on-every-sql-server-instance)します。

2. [可用性グループを作成](#create-an-availability-group)します。

3. [可用性グループを検証し、テストする](#validation-and-test-the-availability-group)。

Always On には、MDS の高可用性とディザスターリカバリーを実現する2つの機能があり、どちらも WSFC の上に構築されています。

- 可用性グループ (AG) の Always On

- フェールオーバークラスターインスタンス (FCI) を Always On します。

AG は、データベースレベルの可用性を提供します。 AG (ユーザー データベースのセット) とその仮想ネットワーク名はリソースとして WSFC に登録されます。

FCIs は、インスタンスレベルの高可用性を提供します。 SQL Server サービスとその関連サービスは、WSFC にリソースとして登録されます。 また、FCI ソリューションには、SAN または SMB ファイル共有など、対称的共有ディスク ストレージが必要です。対称的共有ディスク ストレージは、WFC クラスターのすべてのノードで利用できるようにする必要があります。
   
### <a name="prerequisites"></a>前提条件

- すべてのノードに SQL Server をインストールすること。 詳細については、「[SQL Server 2016 のインストール](../../database-engine/install-windows/install-sql-server.md)」を参照してください。

- (推奨) まったく同じ SQL Server 機能セットとバージョンをすべてのノードにインストールすること。 具体的には、MDS をインストールする必要があります。

- (推奨) すべての SQL Server インスタンスで同じ構成を使用すること。 具体的には、すべての SQL Server インスタンスで、同じサーバー照合順序を構成する必要があります。

- (推奨) すべての SQL Server インスタンスで同じサービス アカウントを使用すること。 同じアカウントを使用しない場合、SQL Server インスタンスが互いに通信できるよう、各 SQL Server インスタンスにアクセス許可を与える必要があります。

- SQL Server インスタンスが互いに通信できるように Windows ファイアウォールを設定すること。

### <a name="enable-sql-server-always-on-availability-groups-on-every-sql-server-instance"></a>すべての SQL Server インスタンスで SQL Server Always On 可用性グループを有効にする

1. **SQL Server 構成マネージャー**の左側のウィンドウで **[SQL Server サービス]** をクリックし、右側のウィンドウで **[SQL Server]** を右クリックし、**[プロパティ]** をクリックします。 図 10 を参照してください。

   ![SQL Server の [プロパティ] ウィンドウ](media/Fig10_SQLServerProperties.png)

   図 10

2. [ **SQL Server (MSSQLSERVER)** **のプロパティ** ] ダイアログボックスで、[ **Always On 高可用性** ] タブをクリックし、[ **可用性グループの Always On を有効にする** ] チェックボックスをオンにします。 値が **[Windows フェールオーバー クラスター名]** テキスト ボックスに表示されたら、**[OK]** をクリックして続行します。 図 11 を参照してください。

   ![Always On 可用性グループの有効化オプション](media/Fig11_EnableAlwaysOn.png)

   図 11

3. 警告ページが表示されたら、**[OK]** をクリックして続行します。 図 12 を参照してください。

   ![サービスの停止と再起動を確定する](media/Fig12_WarningServiceStopStart.png)

   図 12

4. **[再起動]** をクリックすると、**SQL Server** サービスが再起動され、この変更が適用されます。 図 10 を参照してください。

> [!NOTE]
> **SQL Server 構成マネージャー**を利用し、SQL Server サービスを実行するサービス アカウントを変更できます。 **[SQL Server (MSSQLSERVER)** **のプロパティ]** ダイアログ ボックスの **[ログオン]** タブをクリックします。 図 11 を参照してください。

### <a name="create-an-availability-group"></a>可用性グループを作成する

すべての SQL Server インスタンスで AG 機能が有効になった後、1つのノードに MDS データベースを含む新しい AG を作成します。

AG は既存のデータベースにのみ作成できます。 そのため、1 つのノードに MDS データベースを作成するか、仮のデータベースを作成し、その後、その仮のデータベースをドロップします。 この例では、空の MDS データベースを作成し、その MDS データベースに AG を作成します。

1. あるノードで **SQL Server Management Studio** (**SSMS**) を起動し、適切な資格情報を利用し、ローカル SQL Server インスタンスに接続します。

2. SSMS で、**新しいクエリ** ウィンドウを開き、次のスクリプトを実行して空のデータベースを作成します。 C:\\temp を完全バックアップに利用する場所に変更します。

   ```sql
   CREATE DATABASE MDS\_Sample
   GO
   BACKUP DATABASE MDS\_Sample TO DISK='C:\\temp'
   GO
   ```

   > [!NOTE]
   > このデータベースで AG を作成するには、データベースの完全バックアップが必要です。

3. **オブジェクトエクスプローラー**で、[ **Always On 高可用性**] フォルダーを展開し、[**新しい可用性グループウィザード**] をクリックして、**新しい可用性グループウィザード**を起動します。 図 13 を参照してください。

   ![新しい可用性グループ ウィザードを起動する](media/Fig13_AvailabilityGroupsFolder.png)

   図 13

4. **新しい可用性グループ**ウィザードで **[次へ]** をクリックし、**[名前の指定]** ページを表示します。 AG の名前を入力し、**[次へ]** をクリックします。 図 14 を参照してください。

   ![可用性グループの名前を入力する](media/Fig14_AvailabilityGroupName.png)

   図 14

5. **[データベースの選択]** ページで作成したデータベースをクリックし、**[次へ]** をクリックします。 図 15 を参照してください。

   ![データベースを選択します](media/Fig15_AvailabilityGroupSelectDatabase.png)

   図 15

6. **[レプリカの指定]** ページで、**[レプリカの追加]** をクリックし、別のレプリカを追加します。 このページには、現行のローカル SQL Server インスタンスがレプリカとして既に一覧表示されています。 図 16 を参照してください。

7. **[サーバーに接続]** ダイアログ ボックスで、適切な資格情報を追加し、**[接続]** をクリックします。

   ![SQL Server インスタンスに接続する](media/Fig16_AddReplicaConnectServer.png)

   図 16

   これで一覧に 2 つのレプリカが表示されるはずです。 この手順を繰り返し、他のノードをレプリカとして追加します。 図 17 を参照してください。

   ![レプリカの一覧を表示する](media/Fig17_AvailabilityGroupSQLReplicas.png)

   図 17

   レプリカごとに、**同期コミット**、**自動フェールオーバー**、**読み取り可能なセカンダリ**を設定します。 図 17 を参照してください。

**同期コミット**: あるデータベースのプライマリ レプリカでトランザクションがコミットされた場合、そのトランザクションは他のすべての同期レプリカでもコミットされます。 非同期コミットではこれが保証されません。プライマリ レプリカに遅れることがあります。

通常は、2 つのノードが同じデータ センターにあるときにのみ、同期コミットを有効にしてください。 異なるデータ センターに置かれる場合、同期コミットによりデータベースのパフォーマンスが遅くなることがあります。 このチェックボックスが選択されていない場合、非同期コミットが使用されます。

**自動フェールオーバー:** プライマリ レプリカが停止したとき、自動フェールオーバーが選択されていれば、AG はそのセカンダリ レプリカに自動的にフェールオーバーします。 これは同期コミットが設定されたレプリカでのみ有効にできます。

**読み取り可能セカンダリ:** 既定では、ユーザーはいかなるセカンダリ レプリカにも接続できません。 このチェックボックスをオンにすると、読み取り専用アクセスでセカンダリ レプリカに接続できるようになります。

8. **[レプリカの指定]** ページで、**[リスナー]** タブをクリックし、次の操作を行います。 図 18 を参照してください。

   a. **[可用性グループ リスナーの作成]** をクリックし、MDS データベース接続の可用性グループ リスナーを設定します。

   b. **[リスナーの DNS 名]** を入力します。たとえば、「MDSSQLServer」にします。

   c. **[ポート]** テキスト ボックスに既定の SQL ポートである 1433 を入力します。

   d. **[ネットワーク モード]** テキスト ボックスに DHCP を入力し、**[次へ]** をクリックして続行します。

   > [!NOTE]
   > 必要に応じて、 **ネットワークモード** として [静的 ip] を選択し、静的 ip を入力できます。 1433 以外のポートも入力できます。

   ![リスナーを構成する](media/Fig18_AvailabilityGroupCreateListener.png)

   図 18

9. **[データ同期の選択]** ページで、**[完全]** をクリックし、すべてのノードがアクセスできるネットワークを指定します。 **[次へ]** をクリックして次に進みます。 図 19 を参照してください。

   このネットワーク共有は、セカンダリ レプリカの作成時にデータベース バックアップを保存するために利用されます。 所属する組織でネットワーク共有を利用できない場合、別のデータ同期方法を選択してください。 他のオプションを使用してセカンダリレプリカを作成する方法については、 [SQL Server 2016 Always On 可用性グループ](../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md) に関する説明を参照してください。 図 17 では、その他の選択肢も確認できます。

   ![データ同期を構成する](media/Fig19_AvailabilityGroupDataSync.png)

   図 19 

10. **[検証]** ページで、すべての検証に合格していることを確認します。エラーがあれば、修正してください。 **[次へ]** をクリックして次に進みます。

11. **[概要]** ページで、すべての構成を確認し、**[完了]** をクリックします。 可用性グループが作成され、構成されます。

12. **[結果]** ページで、必要なすべての手順が完了したことを確認します。

### <a name="validation-and-test-the-availability-group"></a>可用性グループを検証し、テストする

1. SSMS を開き、「[可用性グループを作成する](#create-an-availability-group)」セクションで作成したリスナー DNS 名に接続します。 サンプルでは、MDSSQLServer です。

2. **オブジェクトエクスプローラー**で、[ **Always On 高可用性**] フォルダーを展開し、[[可用性グループの作成](#create-an-availability-group)] セクションで作成した AG を右クリックして、[ダッシュボードの**表示**] をクリックします。 図 20 を参照してください。 新しい AG とそのレプリカの状態が表示されます。

   ![ダッシュボードの表示](media/Fig20_ShowDashboard.png)

   図 20 

3. **[フェールオーバー]** をクリックし、同期レプリカと非同期レプリカにフェールオーバーします。 この目的は、フェールオーバーが問題なく行われることを確認することです。

   AG のセットアップが完了しました。

Always On 可用性グループの詳細については、「 [SQL Server 2016 Always On 可用性グループ](../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md)」を参照してください。

## <a name="configure-mds-to-run-on-an-wsfc-node"></a>WSFC ノードで実行されるように MDS を構成する

この記事で紹介しているこのソリューションに必要なものは、WSFC で実行されている MDS バックエンド データベースだけです。 Web アプリケーションや MDS 構成マネージャーなど、MDS の他の部分は、MDS が AG に接続できる限り、WSFC のノード上で実行することも、WSFC の外で実行することもできます。

1. 1 つのノードで**マスター データ サービス構成マネージャー**を起動し、**[データベース構成]** をクリックし、**[データベースの作成]** をクリックして**データベースの作成ウィザード**を起動します。

2. **[データベース サーバー]** ページで、**[SQL Server インスタンス]** テキスト ボックスに AG リスナー DSN 名を入力し、**[テスト接続]** をクリックし、**[次へ]** をクリックします。 図 21 を参照してください。

   ![AG リスナーでデータベース サーバーを構成する](media/Fig21_MDSDatabaseServerListener.png)

   図 21

3. **[データベース]** ページで、「[可用性グループを作成する](#create-an-availability-group)」セクションで作成したデータベースの名前を入力し、**[次へ]** をクリックします。 図 22 を参照してください。

   ![データベースを作成し、構成する](media/Fig22_MDSCreateDatabase.png)

   図 22

4. **データベースの作成** **ウィザード** を終了します。 詳細については、「[マスター データ サービスのイントールと構成](../master-data-services-installation-and-configuration.md)」を参照してください。

5. **マスター データ サービス構成マネージャー**で **[Web アプリケーション]** をクリックし、Web アプリケーションを構成し、**[適用]** をクリックして設定を MDS に適用します。 図 23 を参照してください。 詳細については、「[マスター データ サービスのイントールと構成](../master-data-services-installation-and-configuration.md)」を参照してください。

   ![Web アプリケーションを構成する](media/Fig23_MDSWebApplication.png)

   図 23

   MDS 設定が完了です。 上記の手順を繰り返し、すべてのノードで実行されるように MDS を設定できます。 バックエンド データベースは、同じ AG で同じになります。

6. 以前に一時データベースを作成した場合 (「 [可用性グループの作成](#create-an-availability-group) 」セクションを参照)、AG を作成するには、一時データベースを削除する必要があります。

   マスター データ サービスの詳細については、「[マスター データ サービスの概要](../master-data-services-overview-mds.md)」を参照してください。

## <a name="conclusion"></a>まとめ

このホワイトペーパーでは、AG の一部としてマスターデータサービスバックエンドデータベースを設定して構成する方法を説明しました。 この構成により、マスター データ サービスのバックエンド データベースに高可用性とディザスター リカバリーが与えられます。 この構成を実装するには、Windows Server フェールオーバークラスター、AG、およびマスターデータサービスをインストールして構成する必要があります。

## <a name="feedback-comments"></a>フィードバックコメント

このホワイト ペーパーはお役に立ちましたか?  記事の上部にある **[コメント]** をクリックし、フィードバックをお寄せください。 

いただいたフィードバックは、今後のホワイト ペーパーの品質向上につながります。