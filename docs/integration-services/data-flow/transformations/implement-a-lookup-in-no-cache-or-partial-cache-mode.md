---
description: キャッシュなしモードまたは部分キャッシュ モードの参照を実装する
title: キャッシュなしモードまたは部分キャッシュ モードの参照を実装する | Microsoft Docs
ms.custom: ''
ms.date: 03/01/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- Lookup transformation
- match exactly [Integration Services]
- lookups [Integration Services]
- exact matches [Integration Services]
ms.assetid: 01b7fbca-5181-4d47-9f75-7f25af6b40d2
author: chugugrace
ms.author: chugu
ms.openlocfilehash: f971d0788b33420495f1ae7ceeaca56599c8e239
ms.sourcegitcommit: c5078791a07330a87a92abb19b791e950672e198
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/26/2020
ms.locfileid: "92194180"
---
# <a name="implement-a-lookup-in-no-cache-or-partial-cache-mode"></a>キャッシュなしモードまたは部分キャッシュ モードの参照を実装する

[!INCLUDE[sqlserver-ssis](../../../includes/applies-to-version/sqlserver-ssis.md)]


  参照変換は、次の部分キャッシュ モードまたはキャッシュなしのモードを使用するように構成できます。  
  
-   [部分キャッシュ]  
  
     参照データセットに一致するエントリがある行、および必要に応じてデータセットに一致するエントリがない行がキャッシュに格納されます。 キャッシュのメモリ サイズを超えると、使用頻度の最も低い行が、参照変換によって自動的にキャッシュから削除されます。  
  
-   [キャッシュなし]  
  
     キャッシュにデータは読み込まれません。  
  
 部分キャッシュとキャッシュなしのどちらを選択するかにかかわらず、参照データセットへの接続には OLE DB 接続マネージャーを使用します。 参照データセットは、参照変換の実行時に、テーブル、ビュー、または SQL クエリを使用して生成されます。  
  
### <a name="to-implement-a-lookup-transformation-in-no-cache-or-partial-cache-mode"></a>キャッシュなしのモードまたは部分キャッシュ モードの参照変換を実装するには  
  
1.  [!INCLUDE[ssBIDevStudioFull](../../../includes/ssbidevstudiofull-md.md)]で、目的のパッケージが含まれている [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] プロジェクトを開き、そのパッケージを開きます。  
  
2.  **[データ フロー]** タブで、参照変換を追加します。  
  
3.  参照変換をデータ フローに連結します。連結するには、変換元または前の変換から参照変換にコネクタをドラッグします。  
  
    > [!NOTE]  
    >  その変換が空のデータ フィールドを含んだフラット ファイルに接続される場合、キャッシュなしのモードを使用して構成される参照変換は検証されない場合があります。 変換が検証されるかどうかは、フラット ファイルの接続マネージャーが NULL 値を保持するように構成されているかどうかによって決まります。 参照変換が検証されるようにするには、 **フラット ファイル ソース エディター** の **[接続マネージャー]** ページで、 **[データ ソースの NULL 値をデータ フローで NULL 値として保持する]** オプションを選択します。  
  
4.  変換元または前の変換をダブルクリックして、コンポーネントを構成します。  
  
5.  参照変換をダブルクリックし、 **[参照変換エディター]** の **[全般]** ページで **[部分キャッシュ]** または **[キャッシュなし]** を選択します。  
  
6.  **[一致するエントリがない行の処理方法の指定]** ボックスの一覧で、エラー処理オプションを選択します。  
  
7.  **[接続]** ページで、 **[OLE DB 接続マネージャー]** ボックスの一覧から接続マネージャーを選択するか、 **[新規作成]** をクリックして新しい接続マネージャーを作成します。 詳細については、「 [OLE DB 接続マネージャー](../../../integration-services/connection-manager/ole-db-connection-manager.md)」を参照してください。  
  
8.  次のいずれかの手順を実行します。  
  
    -   **[テーブルまたはビューを使用する]** をクリックし、テーブルまたはビューを選択するか、 **[新規作成]** をクリックしてテーブルまたはビューを作成します。  
  
    -   **[SQL クエリの結果を使用する]** をクリックし、 **[SQL コマンド]** ウィンドウでクエリを作成します。  
  
         - または -  
  
         **[クエリの作成]** をクリックし、 **[クエリ ビルダー]** で用意されているグラフィック ツールを使用してクエリを作成します。  
  
         - または -  
  
         **[参照]** をクリックして、ファイルから SQL ステートメントをインポートします。  
  
     SQL クエリを検証するには、 **[クエリの解析]** をクリックします。  
  
     データのサンプルを表示するには、 **[プレビュー**] をクリックします。  
  
9. **[列]** ページをクリックし、 **[使用できる入力列]** 一覧の 1 列以上を **[使用できる参照列]** 一覧の列にドラッグします。  
  
    > [!NOTE]  
    >  参照変換は、同じ名前で同じデータ型を持つ列を自動的にマップします。  
  
    > [!NOTE]  
    >  列をマップするには、データ型が一致している必要があります。 詳細については、「 [Integration Services Data Types](../../../integration-services/data-flow/integration-services-data-types.md)」を参照してください。  
  
10. 次の手順を実行して、参照列を出力に追加します。  
  
    1.  **[使用できる参照列]** ボックスの一覧から列を選択します。  
  
    2.  **[参照操作]** ボックスの一覧で、参照列の値を入力列の値と置き換えるか、新しい列に書き出すかを指定します。  
  
11. 手順 5. で **[部分キャッシュ]** を選択した場合は、 **[詳細設定]** ページで次のキャッシュ オプションを設定します。  
  
    -   **[キャッシュ サイズ (32 ビット)]** ボックスの一覧から、32 ビット環境のキャッシュ サイズを選択します。  
  
    -   **[キャッシュ サイズ (64 ビット)]** ボックスの一覧から、64 ビット環境のキャッシュ サイズを選択します。  
  
    -   参照に一致するエントリがない行をキャッシュするには、 **[一致するエントリがない行のキャッシュを有効にする]** を選択します。  
  
    -   **[キャッシュの割り当て]** ボックスの一覧から、一致するエントリがない行の格納に使用するキャッシュの割合を選択します。  
  
12. 参照データセットを生成する SQL ステートメントを変更するには、 **[SQL ステートメントを変更する]** を選択し、テキスト ボックスに表示される SQL ステートメントを変更します。  
  
     ステートメントにパラメーターが含まれている場合は、 **[パラメーター]** をクリックしてパラメーターを入力列にマップします。  
  
    > [!NOTE]  
    >  このページで指定するオプションの SQL ステートメントは、**[参照変換エディター]** の **[接続]** ページで指定したテーブル名をオーバーライドおよび置換します。  
  
13. エラー出力を構成するには、 **[エラー出力]** ページをクリックし、エラー処理オプションを設定します。 詳細については、「[[参照変換エディター] ([エラー出力] ページ)](./lookup-transformation.md)」をご覧ください。  
  
14. **[OK]** をクリックして参照変換への変更を保存し、パッケージを実行します。  
  
## <a name="see-also"></a>関連項目  
 [Integration Services の変換](../../../integration-services/data-flow/transformations/integration-services-transformations.md)  
  
