---
description: MSSQLSERVER_33128
title: MSSQLSERVER_33128 | Microsoft Docs
ms.custom: ''
ms.date: 04/04/2017
ms.prod: sql
ms.reviewer: ''
ms.technology: supportability
ms.topic: language-reference
helpviewer_keywords:
- 33128 (Database Engine error)
ms.assetid: 12c1096f-d120-439b-85f3-f794859503c9
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 42cd550957444666dcc94a2a215ed1620751a89a
ms.sourcegitcommit: e700497f962e4c2274df16d9e651059b42ff1a10
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/17/2020
ms.locfileid: "88456260"
---
# <a name="mssqlserver_33128"></a>MSSQLSERVER_33128
 [!INCLUDE [SQL Server](../../includes/applies-to-version/sqlserver.md)]
  
## <a name="details"></a>詳細  
  
| 属性 | 値 |  
| :-------- | :---- |  
|製品名|SQL Server|  
|イベント ID|33128|  
|イベント ソース|MSSQLSERVER|  
|コンポーネント|SQLEngine|  
|シンボル名|SEC_DEPRECATED_ALGO|  
|メッセージ テキスト|暗号化は失敗しました。 キーでは非推奨のアルゴリズム '%.*ls' が使用されていますが、このアルゴリズムはサポートされていません。|  
  
## <a name="explanation"></a>説明  
このメッセージは、RC4 (または RC4_128) 暗号化アルゴリズムを参照した場合に表示されます。 RC4 および RC4_128 は、弱いアルゴリズムなので非推奨とされます。 AES アルゴリズムのいずれかなど、強力なアルゴリズムを使用してください  
  
データベースの互換性レベルが 90 または 100 の場合、操作は成功し、今後廃止予定のイベントが発生し、メッセージがリング バッファーにのみ表示されます。  
  
データベースの互換性レベルが 110 以上の場合、暗号化解除操作は成功し、今後廃止予定のイベントが発生して、メッセージがリング バッファーにのみ表示されます。 暗号化操作は失敗し、今後廃止予定のイベントが発生し、ユーザーにメッセージが表示されます。また、メッセージがリング バッファーに表示されます。  
  
> [!NOTE]  
> リング バッファーは完全には文書にまとめられていない内部コンポーネントであり、ユーザーが使用するためのものではありません。 リング バッファーからのメッセージは、[!INCLUDE[msCoName](../../includes/msconame-md.md)] カスタマー サポートに問い合わせる際に役立ちます。 リング バッファーを表示するには、sys.dm_os_ring_buffers 動的管理ビューに対してクエリを実行します。  
  
|State|説明|  
|---------|---------------|  
|1|RC4 キーは、encryptbykey() 組み込み関数で使用されます。 組み込み関数は NULL を返します。 このメッセージは、リング バッファーにのみ表示されます。|  
|2|RC4 キーは、decryptbykey() 組み込み関数で使用されます。 このメッセージは、リング バッファーにのみ表示されます。|  
|3|非推奨の RC4 キーは、対称キーを使用して暗号化されています。 ユーザーとリング バッファーに表示されます。 非推奨の RC4 対称キーは、互換性レベル 110 では変更できません。 暗号化操作には、RC4 以外のキーを使用してください。 必要に応じて、旧バージョンとの互換性レベルを 90 または 100 に設定してください。|  
|4|RC4 以外のキーは、非推奨の RC4 対称キーを使用して暗号化されています。 ユーザーとリング バッファーに表示されます。 RC4 以外の対称キーを使用するようにアプリケーションを変更するか、旧バージョンとの互換性レベルを 90 または 100 に設定してください。|  
|5|非推奨の RC4 キーは、対称キーを使用して暗号化解除されています。 このメッセージは、リング バッファーにのみ表示されます。|  
|6|RC4 以外のキーは、RC4 対称キーを使用して暗号化解除されています。 このメッセージは、リング バッファーにのみ表示されます。|  
|7|RC4 対称キーは、証明書を使用して暗号化されています。 ユーザーとリング バッファーに表示されます。|  
|8|RC4 対称キーは、証明書を使用して暗号化解除されています。 このメッセージは、リング バッファーにのみ表示されます。|  
|9|RC4 対称キーは、EKM キーを使用して暗号化されています。|  
|10|RC4 対称キーは、EKM キーを使用して暗号化解除されています。 このメッセージは、リング バッファーにのみ表示されます。|  
  
## <a name="user-action"></a>ユーザーの操作  
AES アルゴリズムのいずれかなど、強力なアルゴリズムを使用してください (推奨)  
  
ALTER DATABASE SET COMPATIBILITY_LEVEL を使用して、データベースの互換性レベルを 100 に設定してください (非推奨)。  
  
