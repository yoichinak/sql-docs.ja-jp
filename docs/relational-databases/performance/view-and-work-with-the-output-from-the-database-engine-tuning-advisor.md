---
title: DTA からの出力
description: SQL Server インストールでデータベース エンジン チューニング アドバイザーによって作成されるサマリー、推奨設定、レポート、チューニング ログを使用する方法について説明します。
ms.custom: seo-dt-2019
ms.date: 03/14/2017
ms.prod: sql
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
f1_keywords:
- sql13.dta.sessionmonitor.f1
- sql13.dta.reports.f1
- sql13.dta.recommendations.f1
- sql13.dta.applyrecommendations.f1
helpviewer_keywords:
- viewing logs
- recommendations [Database Engine Tuning Advisor]
- summary tuning information [SQL Server]
- Database Engine Tuning Advisor [SQL Server], recommendations
- Database Engine Tuning Advisor [SQL Server], logs
- Database Engine Tuning Advisor [SQL Server], viewing output
- Database Engine Tuning Advisor [SQL Server], reports
- logs [SQL Server], tuning
- reports [SQL Server], tuning
- viewing tuning output
ms.assetid: 47f9d9a7-80b0-416d-9d9a-9e265bc190dc
author: julieMSFT
ms.author: jrasnick
ms.openlocfilehash: e81bbff1dd2eedace6ac7a5e535db9e9689157e8
ms.sourcegitcommit: b09f069c6bef0655b47e9953a4385f1b52bada2b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/27/2020
ms.locfileid: "92734675"
---
# <a name="view-and-work-with-the-output-from-the-database-engine-tuning-advisor-dta"></a>データベース エンジン チューニング アドバイザー (DTA) からの出力を表示および操作する

 [!INCLUDE [SQL Server](../../includes/applies-to-version/sqlserver.md)]

  データベース エンジン チューニング アドバイザーによってデータベースをチューニングすると、サマリー、推奨設定、レポート、およびチューニング ログが作成されます。 チューニング ログ出力を使用すると、データベース エンジン チューニング アドバイザーのチューニング セッションをトラブルシューティングできます。 サマリー、推奨設定、レポートを使用すると、チューニングに関する推奨設定を実装するか、または [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインストールに必要なクエリのパフォーマンスを向上させるまでチューニングを継続するかを判断できます。 データベース チューニング アドバイザーを使用してワークロードを作成およびデータベースをチューニングする方法については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。  
  
##  <a name="view-tuning-output"></a><a name="View"></a> チューニング出力の表示  
 次の手順では、データベース エンジン チューニング アドバイザーの GUI を使用して、チューニングに関する推奨設定、サマリー、レポート、およびチューニング ログを表示する方法について説明します。 ユーザー インターフェイス オプションの詳細については、後の「 [ユーザー インターフェイスの説明](#UI) 」を参照してください。  
  
 また、GUI を使用して、 **dta** コマンド ライン ユーティリティによって生成したチューニング出力を表示できます。  
  
> [!NOTE]  
>  **dta** コマンド ライン ユーティリティを使用し、 **-ox** 引数を使用して出力を XML ファイルに書き込むように指定した場合は、 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] の **[ファイル]** メニューの **[ファイルを開く]** をクリックすると、XML 出力ファイルを開いて表示できます。 詳細については、「 [Use SQL Server Management Studio](../../ssms/sql-server-management-studio-ssms.md)」を参照してください。 **dta** コマンド ライン ユーティリティの詳細については、「 [dta ユーティリティ](../../tools/dta/dta-utility.md)」を参照してください。  
  
#### <a name="to-view-tuning-recommendations-with-the-database-engine-tuning-advisor-gui"></a>データベース エンジン チューニング アドバイザーの GUI を使用してチューニングに関する推奨設定を表示するには  
  
1.  データベース エンジン チューニング アドバイザーの GUI または **dta** コマンド ライン ユーティリティを使用してデータベースをチューニングします。 詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。 既存のチューニング セッションを使用しない場合は、この手順を省略して手順 2. に進みます。  
  
2.  データベース エンジン チューニング アドバイザー GUI を起動します。 詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。 既存のチューニング セッションのチューニングに関する推奨設定を表示するには、 **[セッション モニター]** ウィンドウでセッション名をダブルクリックしてセッションを開きます。  
  
     新しいチューニング セッションの完了後またはツールによって既存のセッションが読み込まれた後に、 **[推奨設定]** ページが表示されます。  
  
3.  **[推奨設定]** ページで、 **[推奨パーティション]** および **[推奨インデックス]** をクリックして、チューニング セッションの結果を表示するペインを表示します。 このセッションのチューニング オプションの設定時にパーティション分割を指定しなかった場合、 **[推奨パーティション]** ペインは空です。  
  
4.  **[推奨パーティション]** または **[推奨インデックス]** ペインでは、スクロール バーを使用して、グリッド内に表示されたすべての情報を見ることができます。  
  
5.  **[推奨設定]** タブ ページの下部にある **[既存のオブジェクトを表示する]** をオフにします。 これによって、推奨設定で参照されるデータベース オブジェクトのみがグリッドに表示されます。 下部のスクロール バーを使用して推奨設定のグリッド内の右端の列を表示し、 **[定義]** 列の項目をクリックして、データベース内にそのオブジェクトを作成する [!INCLUDE[tsql](../../includes/tsql-md.md)] スクリプトの表示またはコピーを行います。  
  
6.  この推奨設定内のすべてのデータベース オブジェクトの作成または削除を行う [!INCLUDE[tsql](../../includes/tsql-md.md)] スクリプトを 1 つのスクリプト ファイルにすべて保存するには、 **[アクション]** メニューの **[推奨設定の保存]** をクリックします。  

#### <a name="to-view-the-tuning-summary-and-reports-with-the-database-engine-tuning-advisor-gui"></a>データベース エンジン チューニング アドバイザーの GUI を使用してチューニング サマリーとレポートを表示するには  
  
1.  データベース エンジン チューニング アドバイザーの GUI または **dta** コマンド ライン ユーティリティを使用してデータベースをチューニングします。 詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。 既存のチューニング セッションを使用しない場合は、この手順を省略して手順 2. に進みます。  
  
2.  データベース エンジン チューニング アドバイザー GUI を起動します。 詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。 既存のチューニング セッションのチューニング サマリーおよびレポートを表示するには、 **[セッション モニター]** でセッション名をダブルクリックしてセッションを開きます。  
  
3.  新しいチューニング セッションの完了後またはツールによって既存のセッションが読み込まれた後に、 **[レポート]** タブをクリックします。  
  
4.  **[チューニング サマリー]** ペインには、チューニング セッションに関する情報が表示されます。 **[予測向上率 (%)]** および **[推奨構成で使用される容量]** に表示される情報は、その推奨設定を実装するかどうかを判断するために特に役立ちます。  
  
5.  **[チューニング レポート]** ペインで、 **[レポートの選択]** をクリックして、表示するチューニング レポートを選択します。  
  
#### <a name="to-view-tuning-logs-with-the-database-engine-tuning-advisor-gui"></a>データベース エンジン チューニング アドバイザーの GUI を使用してチューニング ログを表示するには  
  
1.  データベース エンジン チューニング アドバイザーの GUI または **dta** コマンド ライン ユーティリティを使用してデータベースをチューニングします。 ワークロードをチューニングする場合は、 **[全般]** タブの **[チューニング ログを保存する]** がオンになっていることを確認します。 既存のチューニング セッションを使用しない場合は、この手順を省略して手順 2. に進みます。  
  
2.  データベース エンジン チューニング アドバイザー GUI を起動します。 詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。 既存のチューニング セッションのチューニング サマリーおよびレポートを表示するには、 **[セッション モニター]** ウィンドウでセッション名をダブルクリックしてセッションを開きます。  
  
3.  新しいチューニング セッションの完了後またはツールによって既存のセッションが読み込まれた後に、 **[進行状況]** タブをクリックします。 **[チューニング ログ]** ペインにログの内容が表示されます。 ログには、データベース エンジン チューニング アドバイザーが分析できなかったワークロード イベントに関する情報が含まれています。  
  
     チューニング セッションのすべてのイベントがデータベース エンジン チューニング アドバイザーによって分析された場合は、セッションのチューニング ログが空であるというメッセージが表示されます。 チューニング セッションを実行したときに、 **[全般]** タブの **[チューニング ログを保存する]** が最初からオフであった場合は、そのことを示すメッセージが表示されます。  
  
##  <a name="implement-tuning-recommendations"></a><a name="Implement"></a> チューニングに関する推奨設定の実装  
 チューニング セッションの一部として、データベース エンジン チューニング アドバイザーの推奨設定を手動または自動的に実装できます。 実装する前にチューニング結果を調べるには、データベース エンジン チューニング アドバイザーの GUI を使用します。 次に、 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] を使用して、推奨設定を実装するためのワークロードの解析結果としてデータベース エンジン チューニング アドバイザーによって生成される [!INCLUDE[tsql](../../includes/tsql-md.md)] スクリプトを手動で実行できます。 実装する前に結果を調べる必要がない場合は、 **dta** コマンド プロンプト ユーティリティで **-a** オプションを使用できます。 これにより、ユーティリティは、ワークロードを解析した後にチューニング推奨設定を自動的に実装します。 以下では、両方のデータベース エンジン チューニング アドバイザー インターフェイスを使用してチューニングに関する推奨設定を実装する方法を示します。  
  
#### <a name="to-manually-implement-tuning-recommendations-with-the-database-engine-tuning-advisor-gui"></a>データベース エンジン チューニング アドバイザー GUI を使用して、チューニングに関する推奨設定を手動で実装するには  
  
1.  データベース エンジン チューニング アドバイザー GUI または **dta** コマンド プロンプト ユーティリティを使用して、データベースをチューニングします。 詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。 既存のチューニング セッションを使用しない場合は、この手順を省略して手順 2. に進みます。  
  
2.  データベース エンジン チューニング アドバイザー GUI を起動します。 詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。 既存のチューニング セッションのチューニングに関する推奨設定を実装する場合は、 **セッション モニター** でセッション名をダブルクリックしてセッションを開きます。  
  
3.  新しいチューニング セッションが完了した後、またはツールによって既存のセッションが読み込まれた後で、 **[アクション]** メニューの **[推奨設定の適用]** をクリックします。  
  
4.  **[推奨設定の適用]** ダイアログ ボックスで、 **[今すぐ適用する]** または **[後で実行する]** を選択します。 **[後で実行する]** を選択した場合は、適切な日時を選択します。  
  
5.  **[OK]** をクリックして推奨設定を適用します。  
  
#### <a name="to-automatically-implement-tuning-recommendations-using-the-dta-command-prompt-utility"></a>dta コマンド プロンプト ユーティリティを使用して、チューニングに関する推奨設定を自動的に実装するには  
  
1.  解析時に、データベース エンジン チューニング アドバイザーによって追加、削除、または保有を検討するデータベースの機能 (インデックス、インデックス付きビュー、パーティション分割) を決定します。  
  
     チューニングを開始する前に以下の事項に注意してください。  
  
    -   ワークロードとしてトレース テーブルを使用する場合、そのテーブルは、データベース エンジン チューニング アドバイザーがチューニングを実行するサーバーと同じサーバー上に存在する必要があります。 異なるサーバー上でトレース テーブルを作成した場合は、そのテーブルを、データベース エンジン チューニング アドバイザーがチューニングを実行するサーバーに移す必要があります。  
  
    -   チューニング セッションが予想実行時間を過ぎても終了しない場合は、Ctrl + C キーを押すとチューニング セッションを終了できます。 この状態で Ctrl + C を押すと、 **dta** によってワークロードの消費状態に基づいた最適な推奨設定が生成され、ワークロードのチューニングにツールが費やした時間は無駄になりません。  
  
2.  コマンド プロンプトで、次のコマンドを入力します。  
  
    ```  
    dta -E -D DatabaseName -if WorkloadFile -s SessionName -a  
    ```  
  
     **-E** で、チューニング セッションにおいてログイン ID およびパスワードの代わりに信頼関係接続を使用するように指定します。 **-D** で、チューニングするデータベースまたはワークロードによって使用される複数のデータベースをコンマで区切ったリストを指定します。 **-if** で、ワークロード ファイルの名前とファイルへのパスを指定します。 **-s** で、チューニング セッションの名前を指定します。 **-a** で、ワークロードを解析した後に、 **dta** コマンド プロンプト ユーティリティによってチューニングに関する推奨設定をプロンプトを表示せずに自動的に適用するように指定します。 **dta** コマンド プロンプト ユーティリティを使用してデータベースをチューニングする方法の詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。  
  
3.  Enter キーを押します。  
  
##  <a name="perform-exploratory-analysis"></a><a name="Analysis"></a> 調査分析の実行  
 データベース管理者は、データベース エンジン チューニング アドバイザーのユーザー指定の構成機能により、予備分析を実行できます。 データベース管理者はこの機能を使用して、目的とする物理データベース デザインをデータベース エンジン チューニング アドバイザーに指定します。その結果、そのデザインを実装しなくても、パフォーマンス効率を評価できます。 データベース エンジン チューニング アドバイザーでは、ユーザー指定の構成がグラフィカル ユーザー インターフェイス (GUI) でもコマンド ライン ユーティリティでもサポートされます。 ただし、コマンド ライン ユーティリティの方が、最大限の柔軟性が得られます。  
  
 データベース エンジン チューニング アドバイザー GUI を使用すると、データベース エンジン チューニング アドバイザーのチューニングの推奨設定のサブセットを実装した場合の効果を評価できます。ただし、データベース エンジン チューニング アドバイザーで評価するために、仮定の物理デザイン構造を追加することはできません。  
  
 次の手順では、両方のツールのインターフェイスによるユーザー指定の構成機能の使用方法について説明します。  
  
### <a name="using-database-engine-tuning-advisor-gui-to-evaluate-tuning-recommendations"></a>データベース エンジン チューニング アドバイザー GUI を使用したチューニングの推奨設定の評価  
 次の手順では、データベース エンジン チューニング アドバイザーで生成される推奨設定を評価する方法について説明します。ただし、GUI からは評価用に新しい物理デザイン構造を指定することはできません。  
  
##### <a name="to-evaluate-tuning-recommendations-with-the-database-engine-tuning-advisor-gui"></a>データベース エンジン チューニング アドバイザー GUI でチューニングの推奨設定を評価するには  
  
1.  データベース エンジン チューニング アドバイザー GUI を使用して、データベースをチューニングします。 詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。 既存のチューニング セッションを評価するには、 **セッション モニター** でそのチューニング セッションをダブルクリックします。  
  
2.  **[推奨設定]** タブで、推奨の物理デザイン構造から使用しない構造を消去します。  
  
3.  **[アクション]** メニューの **[推奨設定の評価]** をクリックします。 新しいチューニング セッションが作成されます。  
  
4.  新しい **[セッション名]** を入力します。 評価中の物理データベース デザイン構造の構成を表示するには、データベース エンジン チューニング アドバイザーのアプリケーション ウィンドウ下部の **[説明]** 領域にある **[構成セクションを参照するにはここをクリックします。]** をクリックします。  
  
5.  ツール バーの **[分析の開始]** ボタンをクリックします。 データベース エンジン チューニング アドバイザーが終了すると、 **[推奨設定]** タブに結果が表示されます。  
  
### <a name="using-database-engine-tuning-advisor-gui-to-export-tuning-session-results-for-what-if-tuning-analysis"></a>データベース エンジン チューニング アドバイザー GUI を使用した、"What-if" チューニング分析のチューニング セッション結果のエクスポート  
 次の手順では、データベース エンジン チューニング アドバイザーのチューニング セッションの結果を XML ファイルにエクスポートする方法について説明します。この XML ファイルは、 **dta** コマンド ライン ユーティリティを使用して、編集およびチューニングできます。 これにより、仮定の新しい物理デザイン構造でチューニング分析を実行できます。必要とするパフォーマンスの向上が得られるかどうかを調べる前に、データベースへ新しい仮定の物理デザイン構造を実装するオーバーヘッドは要しません。 XML に不慣れなユーザーが、データベース エンジン チューニング アドバイザー XML スキーマの柔軟性を利用して "what-if" 分析を実行するには、データベース エンジン チューニング アドバイザー GUI を使用して最初にデータベースをチューニングし、次にチューニング結果を **.xml** ファイルにエクスポートする方法が適切です。  
  
##### <a name="to-export-tuning-session-results-from-the-database-engine-tuning-advisor-gui-for-what-if-analysis-with-the-dta-command-line-utility"></a>dta コマンド ライン ユーティリティを使用して、チューニング セッションの結果を "what-if" 分析用にデータベース エンジン チューニング アドバイザー GUI からエクスポートするには  
  
1.  データベース エンジン チューニング アドバイザー GUI を使用して、データベースをチューニングします。 詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。 既存のチューニング セッションを評価するには、 **セッション モニター** でチューニング セッションをダブルクリックします。  
  
2.  **[ファイル]** メニューで **[セッション結果のエクスポート]** をクリックし、XML ファイルとして保存します。  
  
3.  使い慣れた XML エディター、テキスト エディター、または [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]で、手順 2. で作成した XML ファイルを開きます。 **Configuration** 要素まで下方向にスクロールします。 **Configuration** 要素セクションをコピーし、XML 入力ファイル テンプレートの **TuningOptions** 要素の後に貼り付けます。 この XML 入力ファイルを保存します。  
  
4.  手順 3. で作成した新しい XML 入力ファイルで、 **TuningOptions** 要素にチューニング オプションを指定し、 **Configuration** 要素セクションを編集し (分析に応じて適宜、物理デザイン構造を追加または削除)、ファイルを保存して、データベース エンジン チューニング アドバイザー XML スキーマに対する検証を行います。 この XML ファイルの編集方法については、「[XML 入力ファイル リファレンス &#40;データベース エンジン チューニング アドバイザー&#41;](../../tools/dta/xml-input-file-reference-database-engine-tuning-advisor.md)」を参照してください。  
  
5.  **dta** コマンド ライン ユーティリティへの入力として、手順 4. で作成した XML ファイルを使用します。 このツールでの XML 入力ファイルの使用については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」の「dta ユーティリティの使用によるデータベースのチューニング」を参照してください。  
  
### <a name="using-the-user-specified-configuration-feature-with-the-dta-command-line-utility"></a>dta コマンド ライン ユーティリティによるユーザー指定の構成機能の使用  
 経験豊かな XML 開発者の場合、データベース エンジン チューニング アドバイザーの XML 入力ファイルを作成できます。XML 入力ファイルでは、インデックス、インデックス付きビュー、パーティション分割などのワークロードや物理データベース デザイン構造の仮定の構成を指定できます。 その後、 **dta** コマンド ライン ユーティリティを使用して、この仮定の構成がデータベース クエリのパフォーマンスに及ぼす影響を分析できます。 次の手順では、このプロセスを順を追って説明します。  
  
##### <a name="to-use-the-user-specified-configuration-feature-with-the-dta-command-line-utility"></a>dta コマンド ライン ユーティリティでユーザー指定の構成機能を使用するには  
  
1.  チューニング ワークロードを作成します。 この作業の実行の詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。  
  
2.  [ユーザー指定の構成を指定した XML 入力ファイルのサンプル &#40;DTA&#41;](../../tools/dta/xml-input-file-sample-with-user-specified-configuration-dta.md) をコピーして、XML エディターまたはテキスト エディターに貼り付けます。 このサンプルを使用して、チューニング セッションの XML 入力ファイルを作成します。 このタスクの実行については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」の「XML 入力ファイルの作成」を参照してください。  
  
3.  サンプルの XML 入力ファイルで、 **TuningOptions** 要素と **Configuration** 要素を編集します。 **TuningOptions** 要素で、データベース エンジン チューニング アドバイザーでチューニング セッション中に考慮される物理デザイン構造を指定します。 **Configuration** 要素で、データベース エンジン チューニング アドバイザーで分析される、物理データベース デザイン構造の仮定の構成に一致する物理デザイン構造を指定します。 **TuningOptions** 親要素および **Configuration** 親要素と共に使用できる属性と子要素の詳細については、「 [XML 入力ファイル リファレンス &#40;データベース エンジン チューニング アドバイザー&#41;](../../tools/dta/xml-input-file-reference-database-engine-tuning-advisor.md)」を参照してください。  
  
4.  **.xml** 拡張子を付けて、入力ファイルを保存します。  
  
5.  データベース エンジン チューニング アドバイザーの XML スキーマに対して、手順 4. で保存した XML 入力ファイルを検証します。 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] をインストールするときに、次の場所にこのスキーマがインストールされます。  
  
    ```  
    C:\Program Files\Microsoft SQL Server\100\Tools\Binn\schemas\sqlserver\2004\07\dta\dtaschema.xsd  
    ```  
  
     データベース エンジン チューニング アドバイザーの XML スキーマは、[https://schemas.microsoft.com/sqlserver/2004/07/dta/](https://schemas.microsoft.com/sqlserver/2004/07/dta/) から入手することもできます。  
  
6.  ワークロードと XML 入力ファイルの作成後、分析用に **dta** コマンド ライン ユーティリティに入力ファイルを送信できます。 ユーティリティの **-ox** 引数には、XML 出力ファイル名を指定します。 これにより、 **Configuration** 要素で指定した推奨構成で、XML 出力ファイルが作成されます。 データベース エンジン チューニング アドバイザーを再度実行して、出力に基づいた他の仮定の構成をチェックする場合は、出力ファイルから **Configuration** 要素コンテンツをコピーし、新しい XML 入力ファイルまたは元の XML 入力ファイルに貼り付けることができます。 **dta** ユーティリティでの XML 入力ファイルの使用の詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」の dta ユーティリティを使用してデータベースをチューニングする方法に関するセクションを参照してください。  
  
     チューニング終了後、データベース エンジン チューニング アドバイザー GUI を使用してチューニング レポートを表示するか、または XML 出力ファイルを開いて **TuningSummary** 要素や **Configuration** 要素を表示し、データベース エンジン チューニング アドバイザーの推奨設定を表示します。 チューニング セッションの結果の表示については、このトピックの「 [チューニング出力の表示](#View) 」を参照してください。 XML 出力ファイルには、データベース エンジン チューニング アドバイザーの分析レポートも含まれる場合があります。  
  
7.  必要なだけクエリ パフォーマンスを向上させる仮定の構成が作成されるまで、手順 6. と手順 7. を繰り返します。 その後、新しい構成を実装できます。 詳細については、このトピックの「 [チューニングに関する推奨設定の実装](#Implement) 」を参照してください。  
  
##  <a name="review-evaluate-and-clone-tuning-sessions"></a><a name="ReviewEvaluateClone"></a> チューニング セッションの確認、評価、および複製  
 データベースに対するワークロードの影響分析を開始するたびに、データベース エンジン チューニング アドバイザーによって新しいチューニング セッションが作成されます。 データベース エンジン チューニング アドバイザーの GUI にある **セッション モニター** を使用すると、[!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の特定のインスタンスで実行したすべてのチューニング セッションを表示したり、再度読み込んだりすることができます。 既存のすべてのチューニング セッションを参照できれば、既存のセッションを基にしてセッションを複製したり、既存のチューニング推奨設定を編集し、データベース エンジン チューニング アドバイザーで編集済みのセッションを評価したり、チューニングを定期的に実行して、データベースの物理設計を監視するなどの作業を簡単に行えます。 たとえば、データベースは毎月定期的にチューニングできます。  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のインスタンスに対するチューニング セッションを確認するには、データベース エンジン チューニング アドバイザーでワークロードをチューニングすることで、サーバー インスタンスにおけるチューニング セッションを作成する必要があります。 詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。  
  
### <a name="review-existing-tuning-sessions"></a>既存のチューニング セッションの確認  
 次の手順を使用して、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]の特定のインスタンスにおける既存のチューニング セッションを参照します。  
  
##### <a name="to-review-existing-tuning-sessions"></a>既存のチューニング セッションを確認するには  
  
1.  データベース エンジン チューニング アドバイザー GUI を起動します。 詳細については、「 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)」を参照してください。  
  
2.  **[セッション モニター]** ウィンドウの上半分に、既存のチューニング セッションがすべて表示されます。 表示されるセッションの数は、この [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスでデータベースをチューニングした回数によって異なります。 スクロール バーを使用すると、すべてのチューニング セッションを表示できます。  
  
3.  チューニング セッション名をクリックすると、その詳細が **[セッション モニター]** ウィンドウの下半分に表示されます。  
  
4.  チューニング セッション名をダブルクリックすると、その情報がデータベース エンジン チューニング アドバイザーに読み込まれます。 セッション情報が読み込まれると、任意のタブを選択してこのチューニング セッションに関する情報を表示できるようになります。  
  
### <a name="evaluate-existing-tuning-sessions-as-hypothetical-configurations"></a>仮定構成としての既存のチューニング セッションの評価  
 既存のチューニング セッションを評価するには、次の手順に従います。 既存のチューニング セッションを評価する場合は、そのセッションの推奨設定を表示し、必要に応じて編集した上で、再チューニングを行います。 たとえば、 **table1** のインデックスのみを作成する場合は、インデックス付きビューとパーティションの作成を既存のチューニング推奨設定から削除します。 すると、データベース エンジン チューニング アドバイザーによって新しいチューニング セッションが作成され、編集した推奨設定を仮定構成として、データベースに対するワークロードがチューニングされます。 つまり、編集した推奨設定を実装したものと仮定して、データベースに対するワークロードがチューニングされるので、限られた "what-if" 分析を実行することができます。 この what-if 分析が限られている理由は、データベース エンジン チューニング アドバイザー GUI を使用する場合、選択できるのは既存の推奨設定のサブセットのみであるためです。 完全な what-if 分析を実行し、以前のチューニング セッションのサブセットではない、完全に新しい仮定の構成を指定するには、データベース エンジン チューニング アドバイザーの XML 入力ファイルを **dta** コマンド ライン ユーティリティで使用する必要があります。  
  
##### <a name="to-evaluate-an-existing-tuning-session"></a>既存のチューニング セッションを評価するには  
  
1.  データベース エンジン チューニング アドバイザーを起動した後、 **[セッション モニター]** の上半分に表示されているチューニング セッションをダブルクリックします。これによって、セッション情報がデータベース エンジン チューニング アドバイザーに読み込まれます。  
  
2.  **[進行状況]** タブをクリックしてチューニング ログを確認します。このログには、データベース エンジン チューニング アドバイザーがチューニングできなかったワークロード内のイベントに関するエラー情報が含まれています。 この情報は、ワークロードの効果を評価するのに役立ちます。  
  
3.  このセッションのチューニング結果をさらに確認するには、 **[レポート]** タブをクリックします。このタブでは、チューニング サマリーを表示をしたり、 **[レポートの選択]** ボックスの一覧でチューニング レポートを選択することができます。  
  
4.  **[推奨設定]** タブをクリックすると、チューニングの推奨設定が表示されます。  
  
5.  実装すべきかどうか定かでない推奨設定がある場合は、それをオフにします。  
  
6.  **[アクション]** メニューの **[推奨設定の評価]** をクリックします。 データベース エンジン チューニング アドバイザーによって、編集済みの推奨設定を仮定の構成として使用する新しいチューニング セッションが作成されます。 仮定の構成を XML で表示するには、 **[構成セクションを参照するにはここをクリックします]** をクリックします。  
  
7.  **[全般]** タブで、 **[セッション名]** ボックスに名前を入力し、 **[ワークロード]** で正しいワークロードを指定します。  
  
8.  **[チューニング オプション]** タブでは、チューニング時間や、 **[詳細設定オプション]** に含まれている各オプションを指定できます。  
  
9. ツール バーの **[分析の開始]** ボタンをクリックします。 仮定の構成を使用したデータベースのチューニングが開始されます。 チューニングが完了すると、通常のセッションと同じように、このセッションの結果を表示できます。  
  
### <a name="clone-existing-tuning-sessions"></a>既存のチューニング セッションの複製  
 データベース エンジン チューニング アドバイザーの複製オプションを選択すると、既存のセッションに基づいて新しいチューニング セッションを作成できます。 複製オプションを使用するときは、既存のセッションを基にして新しいチューニング セッションを作成します。 次に、新しいセッションのチューニング オプションを必要に応じて変更します。 前述の手順に従って既存のセッションを評価した場合も新しいチューニング セッションが作成されますが、チューニング オプションを変更することはできません。  
  
##### <a name="to-create-new-tuning-sessions-by-cloning-existing-sessions"></a>既存のセッションを複製して新しいチューニング セッションを作成するには  
  
1.  データベース エンジン チューニング アドバイザーを起動した後、 **[セッション モニター]** の上半分に表示されているチューニング セッションをダブルクリックします。これによって、セッション情報がデータベース エンジン チューニング アドバイザーに読み込まれます。  
  
2.  **[アクション]** メニューで、 **[セッションの複製]** をクリックします。  
  
3.  **[全般]** タブで、 **[セッション名]** ボックスに名前を入力し、 **[ワークロード]** で正しいワークロードを指定します。  
  
4.  **[チューニング オプション]** タブでは、チューニング時間、データベース エンジン チューニング アドバイザーでの作成の対象となる物理的なデザイン構造、および推奨設定からの削除の対象となるものを指定できます。  
  
5.  推奨設定の容量制限、インデックスあたりの最大列数、 **のオンライン中に実装可能な推奨設定をデータベース エンジン チューニング アドバイザーが生成するかどうかを設定するには、** [詳細オプション] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] をクリックします。  
  
6.  ツール バーの **[分析の開始]** ボタンをクリックして、通常のチューニング セッションと同じように、ワークロードの効果を分析します。 チューニングが完了すると、通常のセッションと同じように、このセッションの結果を表示できます。  
  
##  <a name="user-interface-descriptions"></a><a name="UI"></a> ユーザー インターフェイスの説明  
  
### <a name="sessions-monitor"></a>[セッション モニター]  
 **[セッション モニター]** には、データベース エンジン チューニング アドバイザーで開いたセッションに関する情報が表示されます。 セッションに関する情報をプロパティ ウィンドウに表示するには、 **[セッション モニター]** でセッション名を選択します。  
  
### <a name="recommendations-tab"></a>[推奨設定] タブ  
 データベース エンジン チューニング アドバイザーでワークロードの分析が完了すると、 **[推奨設定]** タブが表示されます。 このグリッドには、分析した各オブジェクトに対する推奨設定が表示されます。 推奨パーティション (ある場合) は上部のグリッドに表示され、推奨インデックスは下部のグリッドに表示されます。 推奨設定がない場合、グリッドは表示されません。  
  
 **[定義]** 列には、推奨されるパーティションやインデックスの定義がハイパーリンクとして表示されます。 通常この列は幅が狭いため、定義全体は表示されません。 ハイパーリンクをクリックするとダイアログ ボックスが開き、定義の全体と **[クリップボードにコピー]** ボタンが表示されます。  
  
#### <a name="partition-recommendations"></a>[推奨パーティション]  
 **データベース名**  
 変更が推奨されたオブジェクトを含むデータベースです。  
  
 **推奨**  
 パフォーマンスを向上するために推奨される操作です。 表示される値は、[作成] と [削除] です。  
  
 **[推奨される対象]**  
 推奨の影響を受けるパーティション関数またはパーティション構成です。 この列のアイコンは、 **[推奨される対象]** を削除または追加する推奨設定と、その対象がパーティション関数なのかパーティション構成なのかを表します。  
  
 **詳細**  
 **[推奨される対象]** の説明です。 表示される値は、パーティション関数の範囲、または空白 (パーティション構成を示す) です。  
  
 **[パーティション番号]**  
 推奨されるパーティション関数で定義されるパーティションの数です。 この関数と構成を組み合わせて使用してから、テーブルに適用した場合、テーブル内のデータは多くのパーティションに分割されます。  
  
 **定義**  
 **[推奨される対象]** の定義です。 列をクリックすると [SQL スクリプトのプレビュー] ダイアログ ボックスが開き、推奨される操作を実行するスクリプトが表示されます。  
  
##### <a name="index-recommendations"></a>[推奨インデックス]  
 **データベース名**  
 変更が推奨されたオブジェクトを含むデータベースです。  
  
 **[オブジェクト名]**  
 推奨設定に関連するテーブルです。  
  
 **推奨**  
 パフォーマンスを向上するために推奨される操作です。 表示される値は、[作成] と [削除] です。  
  
 **[推奨される対象]**  
 推奨設定の影響を受けるインデックスまたはビューです。 この列のアイコンは、 **[推奨される対象]** を削除または追加する推奨設定を表します。  
  
 **詳細**  
 **[推奨される対象]** の説明です。 表示される値は、クラスター化インデックス、インデックス付きビュー、または空白 (非クラスター化インデックスを示す) です。 さらに、インデックスが一意かどうかも示されます。  
  
 **パーティション構成**  
 パーティションが推奨される場合、この列にパーティション構成が表示されます。  
  
 **[サイズ (KB)]**  
 推奨される新しいオブジェクトの予測サイズです。 この列が空白である場合は、 **[レポートを表示して既存のオブジェクトのサイズを確認します]** をクリックします。  
  
 **定義**  
 **[推奨される対象]** の定義です。 列をクリックすると [SQL スクリプトのプレビュー] ダイアログ ボックスが開き、推奨される操作を実行するスクリプトが表示されます。  
  
 **[推奨設定]**  
 選択すると、既存のすべてのオブジェクトをグリッド内に表示します。データベース エンジン チューニング アドバイザーで、そのオブジェクトに関連する推奨設定が作成されていない場合でも、表示されます。  
  
 **[レポートを表示して既存のオブジェクトのサイズを確認します]**  
 選択すると、推奨グリッド内の既存のオブジェクトのサイズを示したレポートを表示します。  
  
### <a name="actions-menuapply-recommendations-options"></a>[アクション] メニュー/[推奨設定の適用] オプション  
 ワークロードが分析されて推奨設定が表示された後で、 **[アクション]** メニューの **[推奨設定の適用]** をクリックし、 **[推奨設定の適用]** ダイアログ ボックスを開きます。  
  
 **[今すぐ適用する]**  
 推奨設定のためのスクリプトを生成し、そのスクリプトを実行して推奨設定を実装します。  
  
 **[後で実行する]**  
 推奨設定のためのスクリプトを生成し、アクションを [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント ジョブとして保存します。  
  
 **Date**  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント ジョブを実行して推奨設定を適用する日付を指定します。  
  
 **Time**  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント ジョブを実行して推奨設定を適用する時刻を指定します。  
  
### <a name="reports-tab-options"></a>[レポート] タブのオプション  
 データベース エンジン チューニング アドバイザーでワークロードの分析が完了すると、 **[レポート]** タブが表示されます。  
  
 **[チューニング サマリー]**  
 データベース エンジン チューニング アドバイザーによる推奨構成の要約が表示されます。  
  
 **Date**  
 データベース エンジン チューニング アドバイザーによってレポートが作成された日付です。  
  
 **Time**  
 データベース エンジン チューニング アドバイザーによってレポートが作成された時刻です。  
  
 **[サーバー]**  
 データベース エンジン チューニング アドバイザーのワークロードの対象となったサーバーです。  
  
 **[チューニングするデータベース]**  
 データベース エンジン チューニング アドバイザーによる推奨構成の影響を受けるデータベースです。  
  
 **[ワークロード ファイル]**  
 ワークロードがファイルの場合に表示されます。  
  
 **[ワークロード テーブル]**  
 ワークロードが [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] テーブルの場合に表示されます。  
  
 **[ワークロード]**  
 ワークロードが [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]のクエリ エディターからインポートされている場合に表示されます。  
  
 **[最大チューニング時間]**  
 データベース エンジン チューニング アドバイザーの分析に使用できる最大時間です。  
  
 **[チューニングに要した時間]**  
 データベース エンジン チューニング アドバイザーでワークロードの分析にかかった実際の時間です。  
  
 **[予測向上率 (%)]**  
 データベース エンジン チューニング アドバイザーの推奨構成がすべて実装された場合に、対象のワークロードで予想される向上率です。  
  
 **[推奨構成で必要な最大容量 (MB)]**  
 推奨構成で想定する最大容量です。 この値は、分析を実行する前に **[チューニング オプション]** タブの **[詳細設定オプション]** ボタンを使用して設定します。  
  
 **[現在の構成で使用されている容量 (MB)]**  
 データベースの分析で、インデックスによって現在使用されている容量です。  
  
 **[推奨構成で使用される容量 (MB)]**  
 データベース エンジン チューニング アドバイザーの推奨構成がすべて実装された場合に、インデックスにより使用されることが予想される概算容量です。  
  
 **[ワークロードのイベント数]**  
 ワークロードに含まれているイベントの数です。  
  
 **[チューニングされたイベント数]**  
 ワークロード内のチューニングされたイベントの数です。 イベントがチューニングできない場合、チューニング ログに記載されます。チューニング ログは **[進行状況]** タブから表示できます。  
  
 **[チューニングされたステートメント数]**  
 ワークロード内のチューニングされたステートメントの数です。 ステートメントがチューニングできない場合、チューニング ログに記載されます。チューニング ログは **[進行状況]** タブから表示できます。  
  
 **[チューニングされたセット内の SELECT ステートメントの比率]**  
 チューニングされたステートメントにおける SELECT ステートメントの比率です。 チューニングされている SELECT ステートメントが存在している場合にのみ表示されます。  
  
 **[チューニングされたセット内の UPDATE ステートメントの比率]**  
 チューニングされたステートメントにおける UPDATE ステートメントの比率です。 チューニングされている UPDATE ステートメントが存在している場合にのみ表示されます。  
  
 **[作成が推奨されるインデックスの数]/[削除が推奨されるインデックスの数]**  
 チューニング対象のデータベースで作成または削除が推奨されるインデックスの数です。 推奨構成にインデックスが含まれる場合にのみ表示されます。  
  
 **[ビューについて作成が推奨されるインデックスの数]/[ビューについて削除が推奨されるインデックスの数]**  
 チューニング対象のデータベースで作成または削除が推奨される、ビューのインデックスの数です。 推奨構成にビューのインデックスが含まれる場合にのみ表示されます。  
  
 **[作成が推奨される統計の数]**  
 チューニング対象のデータベースで作成が推奨される統計の数です。 統計が推奨される場合にのみ表示されます。  
  
 **Select Report**  
 選択したレポートの詳細を表示します。 グリッドの列は各レポートで異なります。  
  
## <a name="see-also"></a>参照  
 [データベース エンジン チューニング アドバイザーの起動および使用](../../relational-databases/performance/start-and-use-the-database-engine-tuning-advisor.md)   
 [dta ユーティリティ](../../tools/dta/dta-utility.md)  
  
