---
title: SQL 脆弱性評価 | Microsoft Docs
description: SQL 脆弱性評価ツールを使用すると、SQL Server でのデータベースの潜在的な脆弱性の検出、追跡、および修復を行うことができます。
ms.custom: ''
ms.date: 11/30/2017
ms.prod: sql
ms.prod_service: security, sql-database
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- SQL Vulnerability Assessment
author: yualan
ms.author: alayu
monikerRange: =azuresqldb-current||>=sql-server-2016||=sqlallproducts-allversions||>=sql-server-linux-2017||=azuresqldb-mi-current
ms.openlocfilehash: 5bd005472036e01ccd4a0ff8e7a1dec7f9759f78
ms.sourcegitcommit: 4d370399f6f142e25075b3714e5c2ce056b1bfd0
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/09/2020
ms.locfileid: "91869178"
---
# <a name="sql-vulnerability-assessment"></a>SQL 脆弱性評価

[!INCLUDE [SQL Server Azure SQL Database](../../includes/applies-to-version/sql-asdb.md)]

SQL 脆弱性評価は使いやすいツールで、データベースに潜在する脆弱性を検出、追跡、修復するのに役立ちます。 これを使用すると、事前の対策としてデータベースのセキュリティを向上させることができます。

脆弱性評価は **SQL Server 2012 以降でサポート**されており、[Azure SQL Database](/azure/sql-database/sql-vulnerability-assessment) 上で実行することもできます。

## <a name="vulnerability-assessment-features"></a>脆弱性評価の機能
SQL 脆弱性評価 (VA) は自分のセキュリティ保護状態を把握できるサービスです。セキュリティ上の問題を解決するために実践できる手順が含まれており、データベースのセキュリティを強化できます。 以下のことに役立ちます。
- データベース スキャン レポートが必要なコンプライアンス要件を満たす。 
- データのプライバシー基準を満たす。
- 変更の追跡が困難である動的データベース環境を監視する。

VA サービスは、お使いのデータベース上で直接スキャンを実行します。 このサービスでは、セキュリティの脆弱性にフラグを付けベスト プラクティスからの逸脱 (構成の不備、過剰な権限、保護されていない機密データなど) に焦点を当てたルールのナレッジ ベースを採用しています。 このルールは Microsoft が推奨するベスト プラクティスに基づいており、お使いのデータベースとその貴重なデータにとって大きなリスクとなるセキュリティの問題に焦点を当てています。 これらのルールでは、さまざまな規制機関の数多くのコンプライアンス基準を満たすための要件も示しています。

スキャンの結果には、各々の問題を解決するために実践できる手順が含まれ、カスタマイズした修復スクリプトが適宜提供されます。 評価レポートは、アクセス許可の構成、機能の構成、およびデータベース設定についての許容可能なベースラインを設定することで、お使いの環境用にカスタマイズできます。 

## <a name="prerequisites"></a>前提条件
この機能は、SQL Server Management Studio (SSMS) バージョン 17.4 以降でのみ使用できます。 最新バージョンを使用していることを確認してください。 最新バージョンは[こちら](../../ssms/download-sql-server-management-studio-ssms.md)で入手できます。

## <a name="getting-started"></a>作業の開始
お使いのデータベースで脆弱性評価の実行を開始するには、以下の手順に従います。
   1.   **SQL Server Management Studio** を開きます。

   2.   SQL Server Database Engine または localhost のインスタンスに接続します。

   3.   **[データベース]** を展開してデータベースを右クリックし、 **[タスク]** をポイントして **[脆弱性評価]** を選択してから、 **[脆弱性のスキャン...]** をクリックします。

   4.   システム データベースの 1 つをスキャンすることで、サーバー レベルの問題をチェックするスキャンを実行できます。 **[システム データベース]** を展開して**マスター** データベースを右クリックし、 **[タスク]** をポイントして **[脆弱性評価]** を選択してから、 **[脆弱性のスキャン...]** をクリックします。

   ![get-started](media/sql-vulnerability-assessment/1-SSMSGetStarted.png)

## <a name="tutorial"></a>チュートリアル
お使いのデータベースで脆弱性評価の実行と管理を行うには、次の手順に従います。

### <a name="1-run-a-scan"></a>1.スキャンを実行する

[脆弱性のスキャン] ダイアログ ボックスでは、スキャンを保存する場所を指定することができます。 既定の場所のままにすることも、 **[参照...]** をクリックしてスキャン結果を別の場所に保存することもできます。

スキャンの準備ができたら、 **[OK]** をクリックしてデータベースの脆弱性をスキャンします。

  > [!NOTE]   
  > このスキャンは軽量で安全です。 実行にかかるのは数秒で、完全に読み取り専用です。 データベースが変更されることはありません。

![スキャン ファイルの保存](media/sql-vulnerability-assessment/2-ssmssavescanfile.png)

### <a name="2-view-the-report"></a>2.レポートを表示する

スキャンが完了したら、スキャン レポートが SSMS の主ウィンドウに自動的に表示されます。 レポートは、セキュリティ状態の概要 (見つかった問題の数とそれぞれの重大度) を示します。 結果には、データベース プリンシパルおよびロールとその関連付けられた権限といったセキュリティ関連の設定のスナップショットだけでなく、ベスト プラクティスからの逸脱に関する警告が含まれます。 スキャン レポートにはさらに、データベースで検出された機密データのマップがあり、保護に使用できる組み込みメソッドの推奨が含まれています。

![スキャン結果](media/sql-vulnerability-assessment/3-ssmsscanresults.png)

### <a name="3-analyze-the-results-and-resolve-issues"></a>3.結果を分析し問題を解決する

結果をレビューして、自分の環境にとってレポートのどの項目がセキュリティ上の真の問題かを判断します。 失敗した結果の各々を掘り下げ、その影響と、セキュリティ チェックが失敗した理由を理解します。 レポートが提供する実践可能な修復情報を使用し、問題を解決します。

![結果の詳細](media/sql-vulnerability-assessment/4-ssmsresultdetails.png)

### <a name="4-set-your-baseline"></a>4.ベースラインを設定する

評価の結果を確認しながら、環境において許容される**ベースライン**として特定の結果をマークできます。 このベースラインは本来、結果のレポート方法をカスタマイズするものです。 ベースラインに一致する結果は、それ以降のスキャンで合格と見なされます。 

自分のベースラインとなるセキュリティ状態を確立すると、VA はベースラインから逸脱したものだけをレポートするため、関連する問題に注意を集中することができます。

![ベースラインの設定](media/sql-vulnerability-assessment/5-ssmssetbaseline.png)

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5.新しいスキャンを実行してカスタマイズした追跡レポートを表示する

**規則のベースライン**の設定が済んだら、新しいスキャンを実行して、カスタマイズしたレポートを表示します。 VA は、承認したベースラインの状態から逸脱した、不合格となるセキュリティ上の問題のみをレポートするようになります。

![ベースライン単位で合格](media/sql-vulnerability-assessment/6-ssmspassperbaseline.png)

### <a name="6-open-a-previously-run-scan"></a>6.以前実行したスキャンを開く

既存のスキャンを開くと、以前実行した脆弱性評価の結果をいつでも表示できます。 これを行うには、データベースを右クリックし **[タスク]** をポイントして、 **[脆弱性評価]** を選択し **[既存のスキャンを開く...]** をクリックします。表示するスキャン結果ファイルを選択し、 **[開く]** をクリックします。 

既存のスキャン結果は、 **[ファイル]->[開く]** メニューから開くこともできます。 **[脆弱性評価...]** を選択して **scans** ディレクトリを開き、表示するスキャン結果を検索します。

![既存のスキャンを開く](media/sql-vulnerability-assessment/7-ssmsopenexistingscan.png)

これで、VA を使用して、お使いのデータベースが常に高いセキュリティ保護を維持し、組織のポリシーに適合することを監視できるようになりました。 コンプライアンスのレポートが必要な場合、VA レポートはコンプライアンス プロセスを促進するのに役立ちます。

## <a name="manage-vulnerability-assessments-using-powershell"></a>PowerShell を使用して脆弱性評価を管理する
PowerShell コマンドレットを使用して、SQL Server の脆弱性評価をプログラムで管理できます。 これらのコマンドレットは、プログラムによる評価の実行、結果のエクスポート、およびベースラインの管理に使用できます。
最初に、PowerShell ギャラリー サイトから最新の [SqlServer PowerShell モジュール](https://www.powershellgallery.com/packages/SqlServer/)をダウンロードします。 詳細については、[ここ](/archive/blogs/sqlsecurity/powershell-cmdlets-for-managing-sql-vulnerability-assessments)を参照してください。

## <a name="next-steps"></a>次のステップ
次のリソースを使用して、SQL 脆弱性評価の詳細を学びます。
- [Azure SQL Database で脆弱性評価を実行する](/azure/sql-database/sql-vulnerability-assessment) 
- [脆弱性評価の使用を説明する Channel 9 ビデオ](https://channel9.msdn.com/Shows/Data-Exposed/Track-and-remediate-potential-database-vulnerabilities-with-SQL-Vulnerability-Assessment)


