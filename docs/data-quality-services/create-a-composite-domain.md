---
description: 複合ドメインの作成
title: 複合ドメインの作成
ms.date: 11/22/2011
ms.prod: sql
ms.prod_service: data-quality-services
ms.reviewer: ''
ms.technology: data-quality-services
ms.topic: conceptual
f1_keywords:
- sql13.dqs.kb.createcd.f1
- sql13.dqs.dm.cdproperties.f1
ms.assetid: c7f0bd84-a02e-4a81-885d-985e6415c499
author: swinarko
ms.author: sawinark
ms.openlocfilehash: 2da6f9cf82d189647d8b13ec864403134d6af571
ms.sourcegitcommit: c7f40918dc3ecdb0ed2ef5c237a3996cb4cd268d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/05/2020
ms.locfileid: "91728033"
---
# <a name="create-a-composite-domain"></a>複合ドメインの作成

[!INCLUDE [SQL Server - Windows only ASDBMI  ](../includes/applies-to-version/sqlserver.md)]

  このトピックでは、 [!INCLUDE[ssDQSnoversion](../includes/ssdqsnoversion-md.md)] (DQS) でナレッジ ベースの複合ドメインを作成する方法について説明します。 複合ドメインは、1 つのデータ フィールドに適用される 1 つ以上の単一ドメインで構成されます。 複合ドメインについて詳しくは、「[複合ドメインの管理](../data-quality-services/managing-a-composite-domain.md)」をご覧ください。  
  
 新しい複合ドメインを作成するには、次の 2 つの方法があります。 1 つ目は、ナレッジ検出アクティビティのマップ手順中に、データ サンプルを分析する過程でナレッジを新しいまたは既存のナレッジ ベースに追加するときに行います。 2 つ目は、ドメイン管理アクティビティの実行中に、既存のドメインを変更するのではなく、新しいドメインを作成するときに行います。 複合ドメインを作成するには、複合ドメインに追加する単一ドメインを少なくとも 2 つ作成しておく必要があります。 新しい複合ドメインの作成時には、既存の複合ドメインに追加されていない既に作成済みの単一ドメインのみを使用できます。 単一ドメインを複数の複合ドメインに追加したり、複合ドメインを別の複合ドメインに追加したりすることはできません。  
  
 複合ドメインを作成したら、複合ドメインのプロパティの変更、ドメインへの参照データ サービスのアタッチ、ドメイン間のルールの作成、または値のリレーションの作成を行うことができます。 そのためには、 **[ドメイン管理]** ページの **[ドメイン リスト]** で複合ドメインを選択し、適切なタブを選択します。  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> はじめに  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> 前提条件  
 複合ドメインを作成するには、ナレッジ ベースを作成して開いておく必要があります。また、複合ドメインに追加する単一ドメインを少なくとも 2 つ作成しておく必要があります。  
  
###  <a name="security"></a><a name="Security"></a> セキュリティ  
  
####  <a name="permissions"></a><a name="Permissions"></a> Permissions  
 複合ドメインを作成するには、DQS_MAIN データベースの dqs_kb_editor ロールまたは dqs_administrator ロールが必要です。  
  
##  <a name="create-a-composite-domain-in-the-knowledge-discovery-activity"></a><a name="ParsingKnowledgeDiscoveryActivity"></a> ナレッジ検出アクティビティでの複合ドメインの作成  
  
1.  [!INCLUDE[ssDQSInitialStep](../includes/ssdqsinitialstep-md.md)][Data Quality Client アプリケーションを実行](../data-quality-services/run-the-data-quality-client-application.md)します。  
  
2.  [!INCLUDE[ssDQSClient](../includes/ssdqsclient-md.md)] のホーム画面で、 **[ナレッジ ベースを開く]** をクリックし、ナレッジ ベースを選択するか、 **[新しいナレッジ ベース]** をクリックし、新しいナレッジ ベースのプロパティを入力します。  
  
3.  アクティビティとして **[ナレッジ検出]** を選択した後に、 **[作成]** をクリックして新しいナレッジ ベースを作成するか、 **[開く]** をクリックして既存のナレッジ ベースを開きます。  
  
4.  **[マップ]** ページで、データ ソースへの接続を指定します。 詳細については、「 [Perform Knowledge Discovery](../data-quality-services/perform-knowledge-discovery.md)」をご参照ください。  
  
5.  **"マッピング"** テーブルで、空の行の **[ソース列]** 列のドロップダウン リストからソース列を選択します。 ソース列に、既存の 2 つの単一ドメインで構成される複合ドメインが含まれていることを確認します。 対応する単一ドメインが存在しない場合は、 **[ドメインの作成]** アイコンをクリックします。  
  
6.  **"マッピング"** テーブルで、空の行の **[ソース列]** 列のドロップダウン リストからソース列を選択します。 ソース列に、各部分が既存の 2 つの単一ドメインで構成される複合ドメインが含まれていることを確認します。 対応する単一ドメインが存在しない場合は、 **[ドメインの作成]** アイコンをクリックして作成します。 詳細については、「 [ドメインの作成](../data-quality-services/create-a-domain.md)」を参照してください。  
  
7.  **[複合ドメインの作成]** アイコンをクリックします。  
  
##  <a name="create-a-composite-domain-in-the-domain-management-activity"></a><a name="DomainManagementActivity"></a> ドメイン管理アクティビティで複合ドメインを作成する  
  
1.  Data Quality Services クライアントのホーム ページで、 **[ナレッジ ベースを開く]** をクリックし、ナレッジ ベースを選択するか、 **[新しいナレッジ ベース]** をクリックし、新しいナレッジ ベースのプロパティを入力します。  
  
2.  アクティビティとして **[ドメイン管理]** を選択した後に、 **[作成]** をクリックして新しいナレッジ ベースを作成するか、 **[開く]** をクリックして既存のナレッジ ベースを開きます。  
  
3.  複合ドメインに必要な 2 つ以上の単一ドメインが存在することを確認します。 存在しない場合は、 **[ドメインの作成]** アイコンをクリックして作成します。 詳細については、「 [ドメインの作成](../data-quality-services/create-a-domain.md)」を参照してください。  
  
4.  **[ドメイン管理]** ページで、ドメイン リストの上にある **[複合ドメインの作成]** アイコンをクリックします。  
  
5.  ナレッジ ベースに一意の名前と 256 文字までの説明を入力します。  
  
6.  **[ドメイン リスト]** で、複合ドメインの一部となるドメインを選択し、右矢印をクリックして **"複合ドメイン内のドメイン"** テーブルに移動します。  
  
7.  **[OK]** をクリックします。  
  
##  <a name="set-composite-domain-properties"></a><a name="CompositeDomainProperties"></a> 複合ドメインのプロパティの設定  
  
1.  **[複合ドメインの作成]** ダイアログ ボックスで、ナレッジ ベースに一意の名前と 256 文字までの説明を入力します。  
  
2.  **[ドメイン リスト]** で、複合ドメインの一部となるドメインを選択し、右矢印をクリックして **"複合ドメイン内のドメイン"** テーブルに移動します。 これは、作成する複合ドメインに追加できる単一ドメインの一覧です。 既存の複合ドメインに追加されていない既に作成済みの単一ドメインのみを使用できます。 単一ドメインをナレッジ ベースの複数の複合ドメインに追加したり、複合ドメインを別の複合ドメインに追加したりすることはできません。  
  
3.  **[詳細設定]** をクリックします。  
  
4.  **[解析方法]** で、次のいずれかを選択します。  
  
    -   **[参照データ]**: 参照データ サービス (RDS) によるデータの書式設定の方法に従ってフィールドの値を解析します。 Data Quality Services は複合ドメインの値を RDS に送信し、RDS は複合ドメイン内のドメインに従って修正および解析されたデータを返します。  
  
    -   **[順番]**: 複合ドメイン内のドメインの順序に従ってフィールドの値を解析します。 最初の値は最初のドメインに、2 番目の値は 2 番目のドメインに含まれます。  
  
    -   **[区切り記号]**: [区切り記号] が選択されているときに表示されるオプション ボタンから選択された区切り記号に基づいてフィールドの値を解析します。 **[タブ]**、 **[セミコロン]**、 **[コンマ]**、 **[スペース]**、または **[その他]** を選択できます。 **[その他]** の場合は、区切り記号として使用する値を入力します。  
  
5.  解析方法として **[区切り記号]** を選択した場合は、 **[ナレッジ ベース解析を使用します]** を選択することもできます。 詳細については、「 [Knowledge-Based Parsing](#KnowledgeBaseParsing)」をご参照ください。  
  
6.  **[完了]** をクリックし、「 [ドメイン管理アクティビティの終了](/previous-versions/sql/sql-server-2016/hh510411(v=sql.130))」の説明に従ってドメイン管理アクティビティを完了します。  
  
##  <a name="follow-up-after-creating-a-composite-domain"></a><a name="FollowUp"></a> 補足情報: 複合ドメインの作成後  
 複合ドメインを作成した後、ドメインで他のドメイン管理タスクを実行したり、ナレッジ検出を実行してナレッジをドメインに追加したり、照合ポリシーをドメインに追加することができます。 詳しくは、「[ナレッジ検出の実行](../data-quality-services/perform-knowledge-discovery.md)」、「[ドメインの管理](../data-quality-services/managing-a-domain.md)」、または「[照合ポリシーの作成](../data-quality-services/create-a-matching-policy.md)」をご覧ください。  
  
##  <a name="knowledge-based-parsing"></a><a name="KnowledgeBaseParsing"></a> ナレッジベースの解析  
 Data Quality Services では、区切り記号または順序だけでなく、ナレッジに基づいてデータを解析することができます。 ナレッジ ベースの解析は、参照データ サービスを使用せずに複合ソース データを複合ドメインにマップする場合に使用します。 ナレッジ ベースの解析を使用すると、データ ソースのデータを関連する単一ドメインに解析できます。 ナレッジ ベースの解析では、まず、ナレッジを使用して複合データを単一ドメインに解析する処理が試行されます。 可能な場合は、文字列の一部が 1 つ以上のドメインに属すると見なされ、文字列がそのさまざまなドメインに解析されます。 たとえば、氏名複合ドメインによって表される氏名フィールドに複合値 "John B. Doe" があるとします。 "John" が "名" ドメインに、"Doe" が "姓" ドメインに属すると見なされた場合、"B." はドメイン ナレッジに基づいて “ミドル ネーム” ドメインに追加されます。  
  
 ナレッジ ベースの解析は、区切り記号ベースの解析も選択している場合にのみ使用できます。 ナレッジ ベースの解析は区切り記号の解析に代わるものではなく、その解析を強化するものです。 解析を行うためのナレッジが存在しない場合にのみ、区切り記号を使用して解析が行われます。 場合によっては、ナレッジ ベースの解析によって一部の解析が決定されてから、区切り記号ベースの解析によってその他の解析が決定されます。  
  
 ナレッジ ベースの解析は、複合ドメインが文字列ドメインで構成されている場合、または複合ドメインが異なる型のドメイン (int、date、time など) を組み合わせて構成されている場合に使用できます。 データ ソースが異なる型のデータで構成されている場合、解析はまず文字列以外のデータ型に対して実行され、次に残りのデータに対して、前述のとおりドメイン ナレッジに基づいて実行されます。  
  
 ナレッジ ベースの解析を使用する場合、複合ドメイン内のドメインよりもソース データ内の値の方が少ないときは、不足しているドメインに null が格納されます。 複合ドメイン内のドメインよりもソース データ内の値の方が多いときは、余分なデータがいずれかの列に追加されます。 複数のドメインに同じ値が含まれる場合、データ ソースは最初に一致したドメインに解析されます。  
  
