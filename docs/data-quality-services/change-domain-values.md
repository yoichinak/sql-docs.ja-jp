---
description: ドメイン値の変更
title: ドメイン値の変更
ms.date: 11/08/2011
ms.prod: sql
ms.prod_service: data-quality-services
ms.reviewer: ''
ms.technology: data-quality-services
ms.topic: conceptual
f1_keywords:
- sql13.dqs.dm.values.f1
ms.assetid: 8c90ab70-3aea-4eaf-a174-4159485c87d3
author: swinarko
ms.author: sawinark
ms.openlocfilehash: bf85cb8b432dcc6bf72208c12b934291bc72b049
ms.sourcegitcommit: c7f40918dc3ecdb0ed2ef5c237a3996cb4cd268d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/05/2020
ms.locfileid: "91724652"
---
# <a name="change-domain-values"></a>ドメイン値の変更

[!INCLUDE [SQL Server - Windows only ASDBMI  ](../includes/applies-to-version/sqlserver.md)]

  このトピックでは、 [!INCLUDE[ssDQSnoversion](../includes/ssdqsnoversion-md.md)] (DQS) でナレッジ ベースのメタデータを変更および拡張する方法について説明します。 ナレッジ検出でナレッジを生成したり、ナレッジ ベースまたはドメインにナレッジをインポートしたり、別のナレッジ ベースに基づいてナレッジ ベースを作成した後に、データ値を対話形式で変更することができます。 ナレッジ ベースを生成するときは、コンピューター支援型のプロセスを利用するほかに、独自のナレッジを使用してデータ値を確認したり、次のように変更したりできます。  
  
-   値の一覧にドメイン値を追加するか、値を選択して一覧から削除します。  
  
-   DQS 検出プロセスによって判定されたドメイン値の状態を、"適切"、"エラー"、または "無効" に変更します。  
  
-   "エラー" または "無効" の値の置換値を入力します。 ドメインに属していない値 (ドメインのデータ型に準拠しない値やドメイン ルールが失敗した値など) は "無効" になります。 ドメインに属していても、構文エラーがある値は "エラー" になります。  
  
-   2 つ以上の値をシノニムとして設定し、検出プロセスによって設定された先頭の値を変更します。その結果、先頭の値によってシノニム値が置き換えられます (ドメインを作成したときに **[先頭の値を使用]** プロパティを設定した場合)。  
  
-   Excel ファイルからドメイン値をインポートします。  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> はじめに  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> 前提条件  
 ドメイン値を変更するには、ドメイン管理アクティビティでナレッジ ベースとドメインを開いておく必要があります。  
  
###  <a name="security"></a><a name="Security"></a> セキュリティ  
  
####  <a name="permissions"></a><a name="Permissions"></a> Permissions  
 ドメイン値を変更するには、DQS_MAIN データベースの dqs_kb_editor ロールまたは dqs_administrator ロールが必要です。  
  
##  <a name="change-domain-values"></a><a name="Change"></a> ドメイン値の変更  
 **"値"** テーブルには、ナレッジ ベースの 1 つのドメインに追加されたナレッジが表示されます。 ドメイン リストで別のドメインを選択すれば、いつでもそのドメインの値を表示することができます。 フィールドの列を以下に示します。  
  
-   **[値]** 列: 選択したドメインに検出プロセスによってデータ サンプルのフィールドから追加されたすべての値が表示されます。 "エラー" と見なされた値は、"適切" と見なされた値のシノニムとして表示されます。  
  
-   **[種類]** 列: 検出プロセスによって判別された値の状態が表示されます。 緑のチェック マークは、値の状態が "適切" または "修正済み" であることを示します。赤い十字型は、値の状態が "エラー" であることを示します。感嘆符付きのオレンジ色の三角形は、値が "無効" であることを示します。 "無効" の値は、ドメインのデータ要件に準拠していません。 "エラー" の値は、有効である可能性がありますが、データ上の理由から適切な値ではありません。  
  
-   **[次に修正]** 列: "エラー" または "無効" としてマークされた元の値から変更される適切な値が表示されます。 DQS では、検出プロセスの結果として適切な値を提案することができます。  
  
 値を変更するには、次の手順に従います。  
  
1.  [!INCLUDE[ssDQSInitialStep](../includes/ssdqsinitialstep-md.md)][Data Quality Client アプリケーションを実行](../data-quality-services/run-the-data-quality-client-application.md)します。  
  
2.  [!INCLUDE[ssDQSClient](../includes/ssdqsclient-md.md)] のホーム画面で、ナレッジ ベースを開くか作成します。 アクティビティとして **[ドメイン管理]** を選択した後に、 **[開く]** または **[作成]** をクリックします。 詳細については、「 [ナレッジ ベースの作成](../data-quality-services/create-a-knowledge-base.md) 」または「 [ナレッジ ベースを開く](../data-quality-services/open-a-knowledge-base.md)」を参照してください。  
  
    > [!NOTE]  
    >  Data Quality Service クライアントのドメイン管理用のページには、それぞれ異なるドメイン管理操作に対応する 5 つのタブが含まれています。 ウィザード ベースのプロセスではないため、任意の管理操作を個別に実行することができます。  
  
3.  **[ドメイン管理]** ページの **[ドメイン リスト]** から、値を変更するドメインを選択するか、新しいドメインを作成します。 新しいドメインを作成する必要がある場合は、「 [ドメインの作成](../data-quality-services/create-a-domain.md)」を参照してください。 **[ドメイン値]** タブをクリックします。  
  
4.  **"値"** テーブルで、変更する必要がある値を表示します。 詳細については、次の「 [適切な値を表示する方法](#Display) 」を参照してください。  
  
5.  値の状態を変更するには、次の手順に従います。  
  
    -   [**選択したドメイン値を修正済みとして設定**する]: 値の状態を [エラー] または [無効] に変更するには、値を選択し、アイコンバーまたは [種類] ボックスの下向き矢印から、[**選択したドメインの値を修正済みとして設定**する (チェック)] をクリックします。 その "エラー" または "無効" の値が "適切" の値とグループ化される場合は、この操作の後でその値を削除します。  
  
    -   **選択したドメインの値をエラーとして設定**する: 値の状態を [正しい] または [無効] から [エラー] に変更するには、値を選択し、アイコンバーの下矢印または [種類] ボックスの一覧から [ **選択したドメイン値をエラーとして設定** ] アイコンをクリックします。 **[次に修正]** 列に修正を入力することも、空のままにしておくこともできます。  
  
    -   **[選択したドメインの値を無効として設定します]**: 値の状態を "適切" または "エラー" から "無効" に変更するには、値を選択し、アイコン バーの下矢印または [種類] ボックスをクリックして、一覧で **[選択したドメインの値を無効として設定します]** (三角形) アイコンをクリックします。 **[次に修正]** 列に修正を入力することも、空のままにしておくこともできます。  
  
    -   **[次に修正]**: 値を "エラー" または "無効" として設定した後、 **[次に修正]** 列に新しい値を入力すると、 その置換値のための新しい行が追加され、"適切" として指定されて、2 つの値がグループ化されます。 新しい値は先頭の値として太字で表示され、"エラー" または "無効" の値はインデントされます。  
  
6.  値をシノニムのグループとして指定するには、"適切" の値を複数選択し、次の手順に従います。  
  
    -   **[選択したドメイン値をシノニムとして設定]**: シノニムを設定するには、"適切" の値を複数選択し、 **[選択したドメイン値をシノニムとして設定]** アイコンをクリックします。 値がグループ化されて、値の 1 つが先頭の値として指定され、その他の値がその値に置き換えられます。 2 つの値をグループ化する場合、どちらかが "エラー" または "無効" であると、値がシノニムにならないことに注意してください。  
  
        > [!NOTE]  
        >  グループ内の複数の値とグループ外の値を選択してシノニムとして設定すると、正しくないエラー メッセージが表示されますが、 そのエラー メッセージのポップアップを閉じると、それらの値がシノニムとして正しく設定されます。  
  
    -   **[選択したシノニム間の関係を解除]**: 複数の値のシノニムの指定を取り消すには、値を選択し、 **[選択したシノニム間の関係を解除]** アイコンをクリックします。 シノニムのグループの解除は、値がグループ化されていて、両方の値が "適切" である場合にのみ実行できます。  
  
    -   **[選択したドメイン値をグループの先頭の値として設定]**: グループの先頭の値を変更するには、先頭の値として指定されていないグループ内の値を選択し、 **[選択したドメイン値をグループの先頭の値として設定]** をクリックします。 先頭の値が他の値の置換値として設定されます。 この操作は、2 つ以上の値がグループ化されていて、DQS によって指定された値から先頭の値を変更する場合にのみ実行できます。 先頭の値は青色の行で太字で示されます。  
  
7.  **スペル チェック**: 値に赤い波線の下線が付いている場合は、スペル チェックで値の修正が提案されています。 その値を右クリックし、必要に応じて修正を選択します。 修正を選択すると、値の種類が "エラー" になり (最初から "エラー" の場合はそのまま)、その修正が **[次に修正]** 列に追加されます。 下矢印をクリックすると、その他の修正案が表示されます。 手動で修正を入力してスペル チェックの辞書に追加すると、修正として選択できるようになります。 詳細については、「 [DQS のスペル チェックの使用](../data-quality-services/use-the-dqs-speller.md) 」および「 [ドメインのプロパティを設定する](../data-quality-services/set-domain-properties.md)」を参照してください。  
  
    > [!NOTE]  
    >  スペル チェックを使用するには、 **[ドメインのプロパティ]** ページで有効にする必要があります。 **[ドメインのプロパティ]** ページで無効になっている場合は、 **[ドメイン値]** ページで **[スペル チェックを有効/無効にします]** アイコンをクリックして有効にすることもできます。  
  
8.  **[新しいドメインの値を追加します]**: クリックすると、テーブルの末尾に行が追加されます。 その行に値を入力すると、行がアルファベット順に並べ替えられます。入力した値には、新しいエントリであることを示す星のマークが値の前に表示されます。  
  
9. **[ドメインの値を Excel からインポートします]**: Excel スプレッドシートから新しい値を追加するには、 **[値をインポートします]** アイコンの下矢印をクリックし、 **[ドメインの値を Excel からインポートします]** を選択します。 ファイル名を入力し、必要に応じて **[先頭の行を見出しとして使用]** を選択し、 **[OK]** をクリックします。 詳細については、「 [値を Excel ファイルからドメインへインポートする](../data-quality-services/import-values-from-an-excel-file-into-a-domain.md)」をご参照ください。  
  
10. **[プロジェクトの値のインポート]**: データ品質プロジェクトから新しい値を追加するには、 **[値をインポートします]** アイコンの下矢印をクリックし、 **[プロジェクトの値のインポート]** を選択します。 ファイル名を入力し、必要に応じて **[先頭の行を見出しとして使用]** を選択し、 **[OK]** をクリックします。 値をインポートするプロジェクトを選択し、 **[OK]** をクリックします。 インポートされた値が表示されます。 **[完了]** をクリックします。 詳細については、「プロジェクトの値をドメインにインポートする」を参照してください。  
  
11. **[選択したドメインの値を削除します]**: ドメインの既存の値を削除するには、削除する値を "値" テーブルで選択し、 **[選択したドメインの値を削除します]** をクリックします。 DQS_NULL というエントリは削除できません。したがって、削除する値を複数選択した場合に、選択した値の中に DQS_NULL が含まれていると、操作が失敗します。  
  
12. **[完了]** をクリックし、「 [ドメイン管理アクティビティの終了](/previous-versions/sql/sql-server-2016/hh510411(v=sql.130))」の説明に従ってドメイン管理アクティビティを完了します。  
  
##  <a name="follow-up-after-changing-domain-values"></a><a name="FollowUp"></a> 補足情報: ドメイン ルールの変更後  
 ドメイン値を変更した後、ドメインで他のドメイン管理タスクを実行したり、ナレッジ検出を実行してナレッジをドメインに追加したり、照合ポリシーをドメインに追加することができます。 詳しくは、「[ナレッジ検出の実行](../data-quality-services/perform-knowledge-discovery.md)」、「[ドメインの管理](../data-quality-services/managing-a-domain.md)」、または「[照合ポリシーの作成](../data-quality-services/create-a-matching-policy.md)」をご覧ください。  
  
##  <a name="the-meaning-of-correct-error-and-invalid-values"></a><a name="Meaning"></a> "適切"、"エラー"、"無効" の各値の意味  
 **[ドメイン値]** ページの **"値"** テーブルの値には、" **適切** "、" **エラー**"、" **無効**" のいずれかの **種類**がそれぞれ割り当てられています。 値の種類は、最初はナレッジ検出アクティビティによって生成されますが、必要に応じて変更できます。 最終的な種類は、検出とインタラクティブな変更の両方に基づいて、クレンジング アクティビティによって生成されます。 これらの設定の意味を以下に示します。  
  
-   **適切:** ドメインに属している、構文エラーのない値です。 たとえば、City ドメインの "Chicago" は正しい値です。  
  
-   **エラー:** ドメインに属している、正しくない値です。 たとえば、City ドメインの "Chicago" が "Shicago" になっている場合はエラーになります。 DQS では、検出プロセスで構文エラーおよび関連付けられた修正が検出された場合に、値が "エラー" として指定されます。 構文エラーには、スペルミスなどがあります。  
  
-   **無効:** ドメインに属していない、修正が関連付けられていない値です。 たとえば、City ドメインの値 "12345" は無効です。 DQS では、ドメイン ルールが失敗した場合に値が "無効" として指定されます。  
  
 値の種類は、他の 2 つのいずれかに手動で変更できます。 手動操作には、妥当性とエラーのセマンティクスは適用されません。 したがって、状態を変更せずに "無効" の値の修正を入力したり、 ドメイン ルールが失敗していない値を "無効" として指定したり、 検出プロセスで構文エラーが見つかっていない値を "エラー" として指定したりすることができます。 "適切" としてマークされている "エラー" の値の修正を、状態を変更せずに削除することもできます。  
  
 **[クレンジング]** アクティビティの **[結果の管理と表示]** ページでインタラクティブなデータ クレンジングを実行する際には、 **[結果の管理と表示]** ページの **[無効]** タブに "無効" と "エラー" の両方の値が含まれます。  
  
##  <a name="how-to-display-the-appropriate-values"></a><a name="Display"></a> 適切な値を表示する方法  
 次のようにして表示を変更することができます。  
  
-   **[フィルター]** ボックスの一覧で状態を選択して、テーブルに表示する結果を状態に基づいて**絞り込み**ます。  
  
-   **[検索]** する 1 つ以上の文字を **[検索]** ボックスに入力して、確認または変更するデータを検索します。 それらの文字が、含まれている場所に関係なく、表示されている値で強調表示されます。  
  
-   **[新規のみ表示]** をクリックします。テーブルに表示される値が、以前のセッションではなく現在のセッションで検出された値のみに制限されます。  
  
-   **[すべて展開]** をクリックして、シノニムのグループのすべての値を表示します (現在折りたたまれている場合)。  
  
-   **[すべて折りたたみ]** をクリックして、シノニムのグループの値を先頭の値以外すべて非表示にします (現在展開されている場合)。  
  
-   **[ドメイン値の変更履歴パネルの表示/非表示]** をクリックして、"値" テーブルの下部に表示されるプレビュー ポップアップで、ドメイン値のコレクションに加えられた最近の変更を確認します。  
  
##  <a name="how-to-handle-null-equivalents"></a><a name="Null"></a> Null に相当するものを処理する方法  
 **[ドメイン値]** タブの各値テーブルに DQS_NULL という値が 1 つ含まれています。 データ ソース内の null は、値テーブルでは SQL_NULL として表示されます。 null に相当する値は、DQS_NULL のシノニムとして設定することができます。 これにより、null と null に相当する値がすべて DQS_NULL として処理されます。  
  
